$(function(){function g(){var a=$(f).val().toLowerCase(),b=$("#select-status").val(),d=$("#select-consultant").val(),e="";$("#suitcases tbody tr").removeClass("even").hide();"all"!=d&&(e+='[data-user-id="'+d+'"]');"all"!=b&&(e+='[data-status="'+b+'"]');""!=a&&(e+='[data-search*="'+a+'"]');$("#suitcases tbody tr"+e).show().filter(":visible").filter(":odd").addClass("even")}$(".tools form").get(0).reset();$(".tools form").on("submit",function(a){a.preventDefault()});$("#select-consultant").selectBoxIt({nostyle:!1,
downArrowIcon:"icon-arrow-down"});$("#select-status").selectBoxIt({nostyle:!1,downArrowIcon:"icon-arrow-down"});var f=$(".search-text","#suitcase-search");(function(a,b,d){jQuery(a).keyup(function(){"undefined"!=typeof window.inputTimeout&&clearTimeout(inputTimeout);inputTimeout=setTimeout(b,d)})})(f,g,500);$(f).on("keyup",function(a){27==a.which&&$(this).val("")});var c=$("#suitcases").stupidtable();$("#suitcases").find("th.cname").click();c.on("aftertablesort",function(a,b){$("#suitcases tbody tr").removeClass("even").filter(":visible").filter(":odd").addClass("even");
$("#suitcases th").removeClass("sort").find(".icon-arrow-up, .icon-arrow-down").remove();$("#suitcases th").eq(b.column).addClass("sort");"asc"==b.direction?$("#suitcases th").eq(b.column).find("a").append('<span class="icon icon-arrow-up"></span>'):$("#suitcases th").eq(b.column).find("a").append('<span class="icon icon-arrow-down"></span>')});$(c).find("tbody .delete a").on("click",function(a){a.preventDefault();a.stopPropagation();a=$(this).attr("data-id");var b=$(this).attr("data-name");$("#delete-suitcase-modal").find("button").attr("data-id",
a);$("#delete-suitcase-modal").find("#suitcase-name").text(b);$("#delete-suitcase-modal").modal({closeText:"X",overlay:"#fff",opacity:0.73,zIndex:2002})});$("#delete-suitcase-modal button").on("click",function(a){a.preventDefault();a="/suitcase/kill";"undefined"!==typeof env&&(a=env+a);var b=$(this).attr("data-id");$.ajax({beforeSend:function(){},dataType:"json",url:a+"/"+b,success:function(a,b,c){!$.isEmptyObject(a)&&a.success&&($('#suitcases tbody tr[data-id="'+a.suitcase.id+'"]').remove(),$("#suitcases tbody tr").removeClass("even").filter(":visible").filter(":odd").addClass("even"),
$.modal.close())},type:"GET"})});$(c).find("tbody .sfid").on("click",function(a){a.preventDefault();a.stopPropagation()});$(c).find("tbody .sfid .value").not(".disabled").on("click",function(a){a.preventDefault();a.stopPropagation();a=$(c).find("tbody .sfid .form:visible");$(a).each(function(){$(this).find("input").val($(this).prev(".value").text());$(this).hide().prev(".value").show()});a=$(this).next(".form");$(this).hide();$(a).show();$(a).find("input").focus().select()});$(c).find("tbody .sfid .form input").on("keyup",
function(a){a.preventDefault();a.stopPropagation();if(13==a.which){var b=$(this).parent().prev(".value"),d=$(this).val();if($(b).text()!=d)if(""!=d){var e=$(b).text(),c="/admin/sf?id="+$(this).attr("data-id");"undefined"!==typeof env&&(c=env+c);$.ajax({beforeSend:function(){$(b).text(d)},data:$(this).serialize(),dataType:"json",url:c,success:function(a,c,f){a.success?($(b).text(a.success),$(this).val(a.success)):(alert("There was a problem with the ID# provided: "+d),$(b).text(e),$(this).val(e))},
type:"POST"})}else"&nbsp;"!=$(b).html()&&$(this).val($(b).text());$(this).parent().hide();$(b).show()}27==a.which&&(b=$(this).parent().prev(".value"),d=$(this).val(),"&nbsp;"!=$(b).html()?$(this).val($(b).text()):$(this).val(""),$(this).parent().hide(),$(b).show())});$(c).find("tbody tr").on("click",function(a){a="/admin/"+$(this).attr("data-id");"undefined"!==typeof env&&(a=env+a);window.location=a});$(c).find("th a").on("click",function(a){a.preventDefault()});$(".tools #select-consultant").on("change",
function(a){$(f).val("");g()});$(".tools #select-status").on("change",function(a){g()})});