var headerCtx=$("header")[0],footerCtx=$("footer")[0],headerSearchBox=$(".search-text",headerCtx),headerSearchSubmit=$(".search-submit",headerCtx);headerSearchBox.focus(function(c){$(this).addClass("active")});headerSearchBox.blur(function(c){$(this).removeClass("active")});var spinTarget=$("#site-search-result .panel-inner").get(0),searchSpinner=(new Spinner({lines:13,length:5,width:2,radius:7,corners:1,color:"#1280d6",rotate:0,trail:60,speed:1,hwaccel:"on"})).spin(spinTarget).stop();
headerSearchBox.keyup(function(c){""==$(headerSearchBox).val()?$("#site-search-result").slideUp("fast"):($("#site-search-result").slideDown("fast"),searchSpinner.spin(spinTarget))});afterDelayedKeyup(headerSearchBox,"submitQuery2()",500);
function submitQuery2(){var c="/package/search.json";"undefined"!==typeof env&&(c=env+c);var e="q="+$(headerSearchBox).val();$.ajax({beforeSend:function(){searchSpinner.stop();$("#site-search-result ul").empty();searchSpinner.spin(spinTarget)},url:c,data:e,dataType:"json",success:function(c,b,e){$.isEmptyObject(c.packages)||searchSpinner.stop();$.each(c.packages,function(a,d){$("#site-search-result ul").append('<li><a href="/package/'+d["package"].slug+'"><img width="50" src="/uploads/packages/'+
d["package"].image+'"/>'+d["package"].title+"</a></li>")})}})}var headerSiteNavTabs=$(".has-sub"),maxWidth=0;$("#nav-experiences").find(".panel-inner > ul > li").each(function(){var c=$(this).innerWidth();maxWidth<c&&(maxWidth=c)}).find("ul.sub-set").css("width",maxWidth+"px");$("a.nav-tab").click(function(c){c.preventDefault()});headerSiteNavTabs.parent().hover(function(){$(this).find(".nav-sub").css("visibility","visible")},function(){$(this).find(".nav-sub").css("visibility","hidden")});
var headerSuitcasePanel=$("#suitcase-panel",headerCtx),headerSuitcaseToggle=$("#suitcase-toggle",headerCtx);$(headerSuitcasePanel).hide();headerSuitcaseToggle.click(function(){$(headerSuitcasePanel).show()});$(".the-tab",headerSuitcasePanel).click(function(){$(headerSuitcasePanel).hide()});$(headerSuitcasePanel).find(".pa-su").on("click",function(c){c.preventDefault();$(headerSuitcasePanel).hide();0<$("#account-modal").length&&$("#account-modal").modal({closeText:"X",overlay:"#fff",opacity:0.73,zIndex:2002})});
$(function(){$("#home-banner").homeslideshow({autoplay:!0,interval:1E4});$("#home-banner .slide-wrapper .step").on("click",function(c){c=$(this).find("a.primary").attr("href");window.location=c})});$("#loved-by li").each(function(){var c=$(this).find("img"),e=$(c).attr("src");$(c).replaceWith('<div class="bw" style="background-image:url('+e+');">&nbsp;</div><div class="color" style="background-image:url('+e+');">&nbsp;</div>')});
$("#home-f-loved li").on("mouseleave",function(c){$(this).find(".color").stop(!0,!0).fadeOut(200);$(this).find(".bw").stop(!0,!0).fadeIn(200)});$("#home-f-loved li").on("mouseenter",function(c){$(this).find(".bw").stop(!0,!0).fadeOut(200);$(this).find(".color").stop(!0,!0).fadeIn(200)});$("#home-f-loved li").on("click",function(c){window.location="/testimonials"});
var stats=new Carousel($("#stat-slides"),{animation:{duration:1500},behavior:{circular:!0,autoplay:7500,keyboardNav:!1},elements:{prevNext:!1,handles:!1,counter:!1},events:{transition:function(c){c=$("#stat-slides").css("left");var e;"0px"==c&&(e=$("#stat-slides li:nth-child(1)").attr("id"));"-1040px"==c&&(e=$("#stat-slides li:nth-child(2)").attr("id"));"-2080px"==c&&(e=$("#stat-slides li:nth-child(3)").attr("id"));$("#stat-prev").removeClass("slide1 slide2 slide3").addClass(e);$("#stat-next").removeClass("slide1 slide2 slide3").addClass(e)}}});
stats.init();$("#stats-panels .carousel-container").append('<div class="carousel-nav"><span id="stat-prev" class="carousel-prev slide1"></span><span id="stat-next" class="carousel-next slide1"></span></div>');$("#stat-prev").on("click",function(){stats.prev();stats.disable()});$("#stat-next").on("click",function(){stats.next();stats.disable()});$("#home-f-testimonial").click(function(c){window.location=$(this).find("a").attr("href")});
$("#home-f-latestnews #latest-news li").hover(function(c){$(this).find("a").addClass("hover")},function(c){$(this).find("a").removeClass("hover")});
$(".f-g-sm").click(function(){$(this).parent().find("ul").hasClass("more-shown")?($(this).find(".sm-label").html("Show More"),$(this).find(".sm-label").siblings("span.icon-arrow-up").removeClass("icon-arrow-up").addClass("icon-arrow-right"),$(this).parent().find("ul").removeClass("more-shown")):($(this).find(".sm-label").html("Show Less"),$(this).find(".sm-label").siblings("span.icon-arrow-right").removeClass("icon-arrow-right").addClass("icon-arrow-up"),$(this).parent().find("ul").addClass("more-shown"))});
var target=$(".pl-results .row").get(1),spinner=(new Spinner({lines:13,length:11,width:4,radius:14,corners:1,color:"#1280d6",rotate:0,trail:60,speed:1,hwaccel:"on",top:"0px"})).spin(target).stop();
$('input[name^="category"]').change(function(c){$(this).is(":checked")&&$(plSearchBox).val("");c=$(this).siblings("ul");c.size()?$(c).find('input[name^="category"]').removeAttr("checked"):$(this).parent("li").parent("ul").siblings('input[name^="category"]').removeAttr("checked");$('input[name^="category"]').siblings("label").removeClass("active");$('input[name^="category"]:checked').siblings("label").addClass("active");c=$(this).siblings("select").val();$.isEmptyObject(c)||$("#catState").multiselect("uncheckAll");
updatePackages()});$('select[name^="category"]').change(function(c){c=$(this).val();$.isEmptyObject(c)||$(this).siblings('input[name^="category"]').removeAttr("checked").siblings("label").removeClass("active");$.isEmptyObject(c)||$(plSearchBox).val("");updatePackages()});$('select[name="sortOrder"]').change(function(c){updatePackages()});$(".pl-sort ul li a").click(function(c){c.preventDefault();$(".pl-sort ul li a").removeClass("selected");$(this).addClass("selected");updatePackages()});
function updatePackages(){if(""!=$(plSearchBox).val())submitQuery();else{var c="/packages.json";"undefined"!==typeof env&&(c=env+c);var e=$('input[name^="category"]:checked').serialize(),f=$('select[name^="category"]').serialize();""==e&&""==f?$("#pl-link-all").addClass("active"):$("#pl-link-all").removeClass("active");var e=e+"&"+f,f="filter="+$(".pl-sort ul li a.selected").attr("data-filter"),b=$('select[name="sortOrder"]').serialize();$.ajax({beforeSend:function(){$(".pl-items").empty();spinner.spin(target)},
url:c,data:e+"&"+b+"&"+f,dataType:"html",success:function(b,a,d){spinner.stop();$(".pl-items").append($(b))}})}}$(function(){$("select#sortOrder").selectBoxIt({nostyle:!1,downArrowIcon:"icon-arrow-down"}).data("selectBoxIt");$("#catState").multiselect({classes:"states",header:!1,minWidth:"176",noneSelectedText:"Select Destinations"})});$(document).ready(function(){});var plFilter=$(".pl-filter"),plSearchBox=$(".search-text",plFilter),plSearchSubmit=$(".search-submit",plFilter);plSearchBox.focus(function(c){$(this).addClass("active")});
plSearchBox.blur(function(c){$(this).removeClass("active")});plSearchBox.keyup(function(c){$('input[name^="category"]').removeAttr("checked").siblings("label").removeClass("active");0<$("#catState").multiselect("getChecked").length&&$("#catState").multiselect("uncheckAll")});afterDelayedKeyup(plSearchBox,"submitQuery()",500);function afterDelayedKeyup(c,e,f){jQuery(c).keyup(function(){"undefined"!=typeof window.inputTimeout&&clearTimeout(inputTimeout);inputTimeout=setTimeout(e,f)})}
function submitQuery(){var c="/package/search";"undefined"!==typeof env&&(c=env+c);var e="q="+$(plSearchBox).val(),f="filter="+$(".pl-sort ul li a.selected").attr("data-filter"),b=$('select[name="sortOrder"]').serialize();$.ajax({beforeSend:function(){$(".pl-items").empty();spinner.spin(target)},url:c,data:e+"&"+b+"&"+f,dataType:"html",success:function(b,a,d){spinner.stop();$(".pl-items").empty();$(".pl-items").append($(b))}})}
$(".d-i-mi",".pd-detail").click(function(){$(".more-detail").hasClass("active")?($(this).find(".d-i-ml").html("More"),$(".more-detail").removeClass("active")):($(this).find(".d-i-ml").html("Less"),$(".more-detail").addClass("active"))});
$('input[name="variant"]').change(function(c){c=$("#pd-header").data("id");var e=$(this).val();c!=e&&($(".pd-a-add").attr("data-id",e),0<$("#suitcase-preview-items").find('.suitcase-preview-item[data-id="'+e+'"]').length?$(".pd-a-add").addClass("disabled"):$(".pd-a-add").removeClass("disabled"),$(".srv-value").find(".up-to").remove(),$("#variant-holder #v"+e).data("upto")?($(".srv-value").text(" "+$("#variant-holder #v"+e).data("srv")),$(".srv-value").prepend('<span class="up-to">Up to</span>')):
$(".srv-value").text($("#variant-holder #v"+e).data("srv")),$(".npc-value").text($("#variant-holder #v"+e).data("cost")),$("h3.name").text($("#variant-holder #v"+e).data("name")),$(".pd-d-utilbar .pd-c-nightcount").text($("#variant-holder #v"+e).data("accommodations")),$(".pd-d-utilbar .pd-c-airfare").text($("#variant-holder #v"+e).data("airfares")),$(".pd-d-utilbar .pd-c-usercount").text($("#variant-holder #v"+e).data("persons")),$(".pd-details .detail").html($("#variant-holder #v"+e).find(".detail").html()),
""==$("#variant-holder #v"+e).find(".more-detail").html()?($(".d-i-mi").hide(),$(".pd-details .more-detail").html("")):($(".d-i-mi").show(),$(".pd-details .more-detail").html($("#variant-holder #v"+e).find(".more-detail").html())));$("#pd-header").data("id",e)});
$("body").on("click","#suitcase-preview #suitcase-preview-header",function(c){$(this).find("span").hasClass("icon-double-up")?($("#suitcase-preview").css("height","226px"),$("#suitcase-preview-content").css("top","162px"),$("#suitcase-preview-content").animate({top:"0px"},function(){$("#suitcase-preview-header .toggle a").find("span").removeClass("icon-double-up").addClass("icon-double-down")})):$("#suitcase-preview-content").animate({top:"162px"},function(){$("#suitcase-preview").css("height","64px");
$("#suitcase-preview-content").css("top","0px");$("#suitcase-preview-header .toggle a").find("span").removeClass("icon-double-down").addClass("icon-double-up")})});$("body").on("click","#suitcase-preview-header .header-nav li.share a, #suitcase-preview-header .header-nav li.comments a, #suitcase-preview-header .header-nav li.button a",function(c){c.stopPropagation()});$("body").on("click","#suitcase-preview-header .suitcase-switcher",function(c){c.stopPropagation()});
$("body").on("click","#suitcase-preview-header .header-nav li.toggle a",function(c){c.preventDefault()});
$(document).ready(function(){function c(a,d){if(0<$("#account-modal").length)$("#fos_user_registration_form_package").val(a),$("#account-modal").attr("data-id",a).modal({closeText:"X",overlay:"#fff",opacity:0.73,zIndex:2002});else if("new"==$("#suitcase-preview").find("form").attr("data-id"))$("#suitcase-modal").modal({closeText:"X",overlay:"#fff",opacity:0.73,zIndex:2002}),$("input#suitcase_package").val(a).attr("value",a),$("input#suitcase_name").focus();else{var g="/suitcase/add/"+a;"undefined"!==
typeof env&&(g=env+g);$.ajax({dataType:"json",url:g,success:function(a,g,b){$.isEmptyObject(a)||($(d).addClass("disabled"),$(".cycle-carousel-wrap")&&$("#suitcase-preview-items").cycle("destroy"),$("#suitcase-preview-header .button a").removeClass("locked").find("span.icon").removeClass("icon-suitcase-locked").addClass("icon-suitcase"),$("#core-suitcase-button").removeClass("locked").find("span.icon").removeClass("icon-suitcase-locked").addClass("icon-suitcase"),$("#core-suitcase-button").find(".count").text(" ("+
a.count+")"),$("#suitcase-preview-count").text(" ("+a.count+")"),$("#suitcase-preview-items").prepend(Twig.render(previewItem,{item:a.item})),e())}})}}function e(){6<$("#suitcase-preview-items > span").length?$("#suitcase-preview-items").cycle({autoHeight:-1,allowWrap:!1,carouselVisible:6,fx:"carousel",next:"#suitcase-preview-next",prev:"#suitcase-preview-prev",slides:"> span",timeout:0}):($("#suitcase-preview-prev").addClass("disabled"),$("#suitcase-preview-next").addClass("disabled"))}e();$("body").on("mouseenter mouseleave",
"#suitcase-preview-items a",function(a){$(this).siblings("a").toggleClass("hover")});$("body").on("mouseenter mouseleave","#suitcase-preview-items a.preview-item-image",function(a){$(this).find(".preview-item-delete").fadeToggle("fast");$(this).find(".preview-item-info").slideToggle("fast")});$("body").on("click","#suitcase-preview-items .preview-item-delete",function(a){a.preventDefault();var d=$(this).parents(".suitcase-preview-item"),g=$(d).data("id");a="/suitcase/delete/"+g;"undefined"!==typeof env&&
(a=env+a);$.ajax({dataType:"json",url:a,success:function(a,b,c){!$.isEmptyObject(a)&&a.deleted&&(b=$('button[data-id="'+g+'"]'),$(b).removeAttr("disabled"),$(".cycle-carousel-wrap")&&$("#suitcase-preview-items").cycle("destroy"),$(d).remove(),$('.pd-a-add[data-id="'+g+'"], .f-add[data-id="'+g+'"], .pd-s-add[data-id="'+g+'"]').removeClass("disabled"),$("#suitcase-preview-count").text(" ("+a.count+")"),$("#core-suitcase-button").find(".count").text(" ("+a.count+")"),e())}})});$(".pd-a-add, .f-add, .pd-s-add").on("click",
function(a){a.preventDefault();a=$(this).attr("data-id");c(a,this)});$(".pl-items").on("click",".i-a-add",function(a){var d=$(this);a=$(this).attr("data-id");0<$("#account-modal").length?($("#fos_user_registration_form_package").val(a),$("#account-modal").attr("data-id",a).modal({closeText:"X",overlay:"#fff",opacity:0.73,zIndex:2002})):"new"==$("#suitcase-preview").find("form").attr("data-id")?($("#suitcase-modal").modal({closeText:"X",overlay:"#fff",opacity:0.73,zIndex:2002}),$("input#suitcase_package").val(a).attr("value",
a),$("input#suitcase_name").focus()):(a="/suitcase/add/"+a,"undefined"!==typeof env&&(a=env+a),$.ajax({dataType:"json",url:a,success:function(a,b,c){$.isEmptyObject(a)||($(d).attr("disabled","disabled"),$(".cycle-carousel-wrap")&&$("#suitcase-preview-items").cycle("destroy"),$("#suitcase-preview-header .button a").removeClass("locked").find("span.icon").removeClass("icon-suitcase-locked").addClass("icon-suitcase"),$("#core-suitcase-button").removeClass("locked").find("span.icon").removeClass("icon-suitcase-locked").addClass("icon-suitcase"),
$("#core-suitcase-button").find(".count").text(" ("+a.count+")"),$("#suitcase-preview-count").text(" ("+a.count+")"),$("#suitcase-preview-items").prepend(Twig.render(previewItem,{item:a.item})),e())}}))});var f=!0;$(".suitcase-switcher select").val($(".suitcase-switcher").attr("data-id"));$('#sc-header form.suitcase-switcher select[name="sid"]').selectBoxIt({nostyle:!1,downArrowIcon:"icon-arrow-down"});$('#suitcase-preview-header form.suitcase-switcher select[name="sid"]').selectBoxIt({alwaysUp:!0,
nostyle:!1,downArrowIcon:"icon-arrow-down"});var b=[];$('form.suitcase-switcher select[name="sid"]').each(function(a,d){b[a]=$(d).data("selectBox-selectBoxIt")});var h=$("form.suitcase-switcher:visible").find(".selectboxit.selectboxit-btn").css("width");$("form.suitcase-switcher").find(".selectboxit.selectboxit-btn").css("width",h);$("#suitcase-modal").on($.modal.BEFORE_CLOSE,function(a,d){1<$('form.suitcase-switcher select[name="sid"] option').length&&$.each(b,function(a,d){b[a].selectOption($(".suitcase-switcher").attr("data-id"))})});
$("#suitcase-modal").on($.modal.CLOSE,function(a,d){1<$('form.suitcase-switcher select[name="sid"] option').length&&(f=!0)});$(".suitcase-switcher select").on("change",function(a){"new"==$(this).val()&&f?($("#suitcase-modal form").attr("data-style",$(this).parent("form").attr("data-style")),$("#suitcase-modal form input#suitcase_package").val("").removeAttr("value"),f=!1,$("#suitcase-modal").modal({closeText:"X",overlay:"#fff",opacity:0.73,zIndex:2002}),$("input#suitcase_name").focus()):"new"!=$(this).val()&&
$(this).val()!=$(".suitcase-switcher").attr("data-id")&&($(".suitcase-switcher").attr("data-id",$(this).val()),"html"==$(this).parent("form").attr("data-style")?$(this).parent("form").submit():(a=$(this).parent("form").serialize(),$.ajax({beforeSend:function(){},data:a,dataType:"json",url:$(this).parent("form").attr("action")+"?format=json",success:function(a,b,c){$.isEmptyObject(a)||($("button.i-a-add").removeAttr("disabled"),$(".pd-a-add, .f-add").removeClass("disabled"),$(".cycle-carousel-wrap")&&
$("#suitcase-preview-items").cycle("destroy"),a.locked?($("#suitcase-preview-header .button a").addClass("locked").find("span.icon").removeClass("icon-suitcase").addClass("icon-suitcase-locked"),$("#core-suitcase-button").addClass("locked").find("span.icon").removeClass("icon-suitcase").addClass("icon-suitcase-locked")):($("#suitcase-preview-header .button a").removeClass("locked").find("span.icon").removeClass("icon-suitcase-locked").addClass("icon-suitcase"),$("#core-suitcase-button").removeClass("locked").find("span.icon").removeClass("icon-suitcase-locked").addClass("icon-suitcase")),
0<a.count?($("#core-suitcase-button").find(".count").text(" ("+a.count+")"),$("#suitcase-preview-count").text(" ("+a.count+")")):($("#core-suitcase-button").find(".count").text(""),$("#suitcase-preview-count").text("")),$("#suitcase-preview-items .suitcase-preview-item").remove(),$.each(a.items,function(a,d){$('button.i-a-add[data-id="'+d.id+'"]').attr("disabled","disabled");$('.pd-a-add[data-id="'+d.id+'"], .f-add[data-id="'+d.id+'"]').addClass("disabled");$("#suitcase-preview-items").prepend(Twig.render(previewItem,
{item:d}))}),e())},type:"GET"})))});$("#suitcase-modal form").validate({errorElement:"em",errorPlacement:function(a,d){switch(d.attr("name")){case "suitcase[date]":a.insertAfter("#suitcase_date + img");break;default:a.insertAfter(d)}},rules:{"suitcase[name]":{required:!0},"suitcase[date]":{required:!0}},messages:{"suitcase[name]":"Event name required","suitcase[date]":"Event date required"},submitHandler:function(a){if("html"==$(a).attr("data-style"))a.submit();else{var d=$(a).serialize();$.ajax({beforeSend:function(){},
data:d,dataType:"json",url:$(a).attr("action")+"?format=json",success:function(a,d,c){$.isEmptyObject(a)||($('#suitcase-preview-header form.suitcase-switcher select[name="sid"]').append('<option value="'+a.suitcase.id+'">'+a.suitcase.name+"</option>"),$(".suitcase-switcher").attr("data-id",a.suitcase.id),$.each(b,function(a,d){b[a].refresh()}),$('#suitcase-modal input[type="text"]').val(""),$("button.i-a-add").removeAttr("disabled"),$(".pd-a-add, .f-add").removeClass("disabled"),$(".cycle-carousel-wrap")&&
$("#suitcase-preview-items").cycle("destroy"),a.locked?($("#suitcase-preview-header .button a").addClass("locked").find("span.icon").removeClass("icon-suitcase").addClass("icon-suitcase-locked"),$("#core-suitcase-button").addClass("locked").find("span.icon").removeClass("icon-suitcase").addClass("icon-suitcase-locked")):($("#suitcase-preview-header .button a").removeClass("locked").find("span.icon").removeClass("icon-suitcase-locked").addClass("icon-suitcase"),$("#core-suitcase-button").removeClass("locked").find("span.icon").removeClass("icon-suitcase-locked").addClass("icon-suitcase")),
0<a.count?($("#core-suitcase-button").find(".count").text(" ("+a.count+")"),$("#suitcase-preview-count").text(" ("+a.count+")")):($("#core-suitcase-button").find(".count").text(""),$("#suitcase-preview-count").text("")),$("#suitcase-preview-items .suitcase-preview-item").remove(),$.each(a.items,function(a,d){$('button.i-a-add[data-id="'+d.id+'"]').attr("disabled","disabled");$('.pd-a-add[data-id="'+d.id+'"], .f-add[data-id="'+d.id+'"]').addClass("disabled");$("#suitcase-preview-items").prepend(Twig.render(previewItem,
{item:d}))}),e(),$.modal.close())},type:"POST"})}}});$("#suitcase_date").datepicker({buttonImage:"/img/calendar.png",buttonImageOnly:!0,constrainInput:!0,dateFormat:"mm/dd/y",minDate:"+1",maxDate:"+1y",onSelect:function(a,d){$("#suitcase-modal form").validate().element("#suitcase_date")},showOn:"both"})});
$(document).ready(function(){function c(){if(1<$("#sc-area.suitcase .content > ul > li").length){$("#suitcase-prev").show();$("#suitcase-next").show();$("#sc-area .content > ul").cycle({autoHeight:-1,allowWrap:!1,carouselVisible:1,fx:"carousel",next:"#suitcase-next, .pager-next",prev:"#suitcase-prev, .pager-prev",slides:"> li",timeout:0});var a=$("#sc-area .content > ul").data("cycle.opts").slideCount;$("#sc-area").find(".pager-current").text("1");$("#sc-area").find(".pager-total").text(a)}else $("#suitcase-prev").hide(),
$("#suitcase-next").hide(),$("#sc-area").find(".pager-current").text("1"),$("#sc-area").find(".pager-total").text("1")}var e=$("#sc-area.suitcase");$(e).find(".content").on("mouseenter",".package",function(a){a=$(this);var d=$(this).find(".item-open");$(a).hasClass("open")||$(d).fadeIn("fast")});$(e).find(".content").on("mouseleave",".package",function(a){$(this);a=$(this).find(".item-open");$(a).fadeOut("fast")});$(e).find(".content").on("click",".package",function(a){var d=$(this),b=$(this).parent("li");
a=$(e).find(".content > ul").find("li > ul > li");var c=$(a).index(b),f=Math.floor(c/3),h=300*(c%3)+30;a=$(a).slice(3*f,3*f+3);c=$(a).not(b);$(d).hasClass("open")?($(c).find(".flag").show(),$(c).find(".package").addClass("drop-shadow"),$(d).removeClass("drop-shadow expanded open"),$(d).find(".expanded").fadeOut(0,function(){$(d).animate({width:"206px"},"fast");$(b).animate({left:h+"px"},"fast",function(){$(b).find("h4").show();$(d).addClass("drop-shadow")})})):($(c).css({zIndex:9}).find(".flag").hide(),
$(a).find(".package").removeClass("drop-shadow"),$(b).css({zIndex:10}),$(b).find("h4").hide(),$(b).find(".item-open").hide(),$(d).animate({width:806},"fast",function(){$(this).addClass("drop-shadow expanded open");$(this).find(".expanded").fadeIn("fast")}),$(b).animate({left:30},"fast"))});$(e).find(".content").on("click","h3 > a",function(a){a.stopPropagation()});$(e).find(".content").on("click",".actions > .more",function(a){a.stopPropagation()});$(e).find(".content").on("click",".actions > .download",
function(a){a.stopPropagation()});$(e).find(".content").on("click",".actions > .delete",function(a){a.preventDefault();a.stopPropagation();var d=$(this).parent(".actions").data("id");a=$('li[data-id="'+d+'"]');d="/suitcase/delete/"+d;"undefined"!==typeof env&&(d=env+d);$(".cycle-carousel-wrap")&&$("#sc-area .content > ul").cycle("destroy");var b=$(e).find(".content > ul").find("li > ul > li"),f=$(b).index(a),f=Math.floor(f/3),b=$(b).slice(3*f,3*f+3),b=$(b).not(a);$(b).find(".flag").show();$(b).find(".package").addClass("drop-shadow");
b=$(e).find(".content > ul").find("li > ul > li");$(b).unwrap().unwrap();a.remove();b=$(e).find(".content > ul > li");$(b).removeClass().removeAttr("style");for(f=0;f<=b.length;f+=6)a=$(b).slice(f,f+6),$(a).wrapAll('<li class="clearfix suitcase-page"/>').wrapAll("<ul/>");var h=1;$(b).each(function(a,d){$(d).addClass("p"+h);h++;6<h&&(h=1)});"View All"==$("#sc-area .content .pager-all").text()&&c();$.ajax({dataType:"json",url:d,success:function(a,d,b){!$.isEmptyObject(a)&&a.deleted&&($(".key").find(".definitely").text(a.counts.D+
a.counts.E),$(".key").find(".maybe").text(a.counts.M),$(".key").find(".recommended").text(a.counts.R),d=" item",1!=a.count&&(d+="s"),$(".key").find(".suitcase-count").text(a.count+d),$(".unpacked").show(),$(".packed").hide(),$("#core-suitcase-button").removeClass("locked").find("span.icon").removeClass("icon-suitcase-locked").addClass("icon-suitcase"),$("#core-suitcase-button").find(".count").text(" ("+a.count+")"),$("#more-modal").find(".suitcase-count").text(a.count),$("#ready").find(".suitcase-count").text(a.count))}})});
$(e).find(".content").on("click","li .flag",function(a){a.preventDefault();a.stopPropagation();if($(this).hasClass("active")){var d=$(this);a="/suitcase/flag/"+$(d).data("id");"undefined"!==typeof env&&(a=env+a);$.ajax({beforeSend:function(){var a=!1,b=!1;switch($(d).attr("data-status")){case "M":a="D";b="definitely";break;case "R":a="E";b="definitely";break;case "D":a="M";b="maybe";break;case "E":a="R",b="recommended"}$(d).removeClass("definitely maybe recommended").addClass(b).attr("data-status",
a)},dataType:"json",url:a,success:function(a,d,b){$.isEmptyObject(a)||($(".key").find(".definitely").text(a.counts.D+a.counts.E),$(".key").find(".maybe").text(a.counts.M),$(".key").find(".recommended").text(a.counts.R))}})}});$("#share-modal").on($.modal.OPEN,function(a,d){$(window).width()<$(document).width()&&$(d.elm).css({marginLeft:Math.floor(($(document).width()-$(d.elm).outerWidth())/2)+"px",left:"0"});94>$(window).height()-$(d.elm).outerHeight()&&($(d.elm).css({position:"absolute",marginTop:"120px",
top:"0"}),$(window).scrollTop(100))});$(".social .share a").on("click",function(a){a.preventDefault();$("#share-modal").modal({closeText:"X",overlay:"#fff",opacity:0.73,zIndex:2002});$("#share-modal form input#share_name_1").focus()});$("#share-form").validate({rules:{"share[name][1]":{required:"#share_email_1:filled"},"share[name][2]":{required:"#share_email_2:filled"},"share[name][3]":{required:"#share_email_3:filled"},"share[name][4]":{required:"#share_email_4:filled"},"share[email][1]":{email:!0,
required:"#share_name_1:filled"},"share[email][2]":{email:!0,required:"#share_name_2:filled"},"share[email][3]":{email:!0,required:"#share_name_3:filled"},"share[email][4]":{email:!0,required:"#share_name_4:filled"}},messages:{"share[email][1]":"Please enter a valid email address","share[name][1]":"Please enter a name","share[email][2]":"Please enter a valid email address","share[name][2]":"Please enter a name","share[email][3]":"Please enter a valid email address","share[name][3]":"Please enter a name",
"share[email][4]":"Please enter a valid email address","share[name][4]":"Please enter a name"},submitHandler:function(a){var d=$(a).serialize();$.ajax({beforeSend:function(){$("#share-modal #share-result #share-result-successes").hide();$("#share-modal #share-result #share-result-errors").hide();$("#share-modal #share-result-holder #share-result-errors").hide();$("#share-modal #share-result-holder #share-result-successes").hide();$("#share-modal #share-result-holder .successes li").remove();$("#share-modal #share-result-holder .errors li").remove()},
data:d,dataType:"json",url:$(a).attr("action"),success:function(a,d,b){!$.isEmptyObject(a)&&$.isEmptyObject(a.formerror)&&($("#share-modal #share-form-holder").hide(),$("#share-modal #share-result-holder").show(),$.isEmptyObject(a.successes)||($("#share-modal #share-result-holder #share-result-successes").show(),$.each(a.successes,function(a,d){$("#share-modal #share-result-holder .successes").append('<li><span class="number">'+(a+1)+'</span><span class="name">'+d.name+'</span><span class="email">'+
d.email+"</span></li>")})),$.isEmptyObject(a.errors)||($("#share-modal #share-result-holder #share-result-errors").show(),$.each(a.errors,function(a,d){$("#share-modal #share-result-holder #share-result-errors .errors").append("<li>"+d.email+' &gt;  This person has already been invited. &nbsp;<a href="#" data-id="'+d.id+'">Resend invite.</a></li>')})))},type:"POST"})}});$("#share-modal #share-result-errors").on("click","a",function(a){a.preventDefault();var d=$(this),b=$(this).parent();a="/suitcase/reshare/"+
$(d).data("id");"undefined"!==typeof env&&(a=env+a);$.ajax({beforeSend:function(){$(d).replaceWith("...")},dataType:"json",url:a,success:function(a,d,c){$.isEmptyObject(a)||$(b).append("Resent!")}})});$("#share-modal #share-more").on("click",function(a){a.preventDefault();$("#share-modal form input[type=text]").val("");$("#share-modal #share-form-holder").show();$("#share-modal form input#share_name_1").focus();$("#share-modal #share-result-holder").hide()});$("#comment-form").on("submit",function(a){a.preventDefault();
a=$(this).serialize();$.ajax({beforeSend:function(){},data:a,dataType:"json",url:$(this).attr("action"),success:function(a,b,c){a.success&&($("#comment-area .commentary").append('<div class="comment"><p><strong>'+a.name+'</strong> <span class="timestamp">'+a.timestamp+"</span></p><p>"+a.message+"</p><hr/></div>"),$("#comment-form textarea").val(""),a=$(".comment-count"),a=a[0],a=parseInt($(a).text()),a++,$(".comment-count").text(a))},type:"POST"})});$("#sc-area .content > ul").on("cycle-after",function(a,
b){$("#sc-area").find(".pager-current").text(b.slideNum);$("#sc-area").find(".pager-total").text(b.slideCount)});$("#reminder-modal").on($.modal.OPEN,function(a,b){$(window).width()<$(document).width()&&$(b.elm).css({marginLeft:Math.floor(($(document).width()-$(b.elm).outerWidth())/2)+"px",left:"0"});94>$(window).height()-$(b.elm).outerHeight()&&($(b.elm).css({position:"absolute",marginTop:"120px",top:"0"}),$(window).scrollTop(100))});$("button#ready").on("click",function(a){0<$('a[data-status="M"], a[data-status="R"]').length?
$("#reminder-modal").modal({closeText:"X",overlay:"#fff",opacity:0.73,zIndex:2002}):$("#more-modal").modal({closeText:"X",overlay:"#fff",opacity:0.73,zIndex:2002})});$("button#approve-all").on("click",function(a){a=$('a[data-status="M"], a[data-status="R"]');var b=[];$(a).each(function(){$(this).removeClass("maybe recommended").addClass("definitely");var a=$(this).attr("data-id"),c;switch($(this).attr("data-status")){case "M":c="D";break;case "R":c="E"}$(this).attr("data-status",c);b.push({status:c,
id:a})});a="/suitcase/flags";"undefined"!==typeof env&&(a=env+a);$.ajax({data:{ids:b},dataType:"json",url:a,success:function(a,b,d){$.isEmptyObject(a)||($(".key").find(".definitely").text(a.counts.D+a.counts.E),$(".key").find(".maybe").text(a.counts.M),$(".key").find(".recommended").text(a.counts.R))}});$.modal.close();$("#more-modal").modal({closeText:"X",overlay:"#fff",opacity:0.73,zIndex:2002})});$("#more-modal").on($.modal.OPEN,function(a,b){$(window).width()<$(document).width()&&$(b.elm).css({marginLeft:Math.floor(($(document).width()-
$(b.elm).outerWidth())/2)+"px",left:"0"});94>$(window).height()-$(b.elm).outerHeight()&&($(b.elm).css({position:"absolute",marginTop:"120px",top:"0"}),$(window).scrollTop(100))});var f,b;"US"==$("#more-modal form select#account_country").val()?(f=$('#account_state option[value|="CA"]').detach(),b=$('#account_state option[value|="US"]').clone()):(f=$('#account_state option[value|="CA"]').clone(),b=$('#account_state option[value|="US"]').detach());$("#more-modal form select").selectBoxIt({autoWidth:!1,
nostyle:!1,downArrowIcon:"icon-arrow-down",viewport:$("#more-modal")});var h=$("select#account_state").data("selectBox-selectBoxIt");$("select#account_country").on("changed",function(){"CA"==$(this).val()?($('#account_state option[value|="US"]').remove(),$(f).appendTo("#account_state")):($('#account_state option[value|="CA"]').remove(),$(b).appendTo("#account_state"));h.refresh()});$("#account_event_date").datepicker({buttonImage:"/img/calendar.png",buttonImageOnly:!0,constrainInput:!0,dateFormat:"mm/dd/y",
minDate:"+1",maxDate:"+1y",onSelect:function(a,b){$("#account-modal form").validate().element("#account_event_date")},showOn:"both"});$("#more-modal form").validate({errorElement:"em",errorPlacement:function(a,b){switch(b.attr("name")){case "account[loa]":a.insertAfter('label[for="account_loa"]');break;case "account[event_date]":a.insertAfter("#account_event_date + img");break;default:a.insertAfter(b)}},rules:{"account[address]":{required:!0},"account[city]":{required:!0},"account[state]":{required:!0},
"account[country]":{required:!0},"account[zip]":{required:!0},"account[event_name]":{required:!0},"account[loa]":{required:!0}},messages:{"account[address]":"Address required","account[city]":"City name required","account[state]":"Required","account[country]":"Required","account[zip]":"Zip code required","account[event_name]":"Event name required","account[loa]":"Must agree to the terms in our Letter of Agreement"},onfocusout:!1,submitHandler:function(a){var b=$(a).serialize();$.ajax({beforeSend:function(){$("#more-modal .error").removeClass("error");
$(a).find("button").attr("disabled","disabled");var b=$(a).find(".spinner-wrap").get(0);(new Spinner({lines:10,length:5,width:2,radius:6,corners:1,color:"#1280d6",rotate:0,trail:60,speed:1,hwaccel:"on"})).spin(b)},data:b,dataType:"json",url:$(a).attr("action"),success:function(a,b,d){$.isEmptyObject(a)||($.isEmptyObject(a.errors)?a.packed&&($.modal.close(),$(".unpacked").hide(),$(".packed").show(),$("#core-suitcase-button").addClass("locked").find("span.icon").removeClass("icon-suitcase").addClass("icon-suitcase-locked"),
$("#thanks-modal").modal({closeText:"X",overlay:"#fff",opacity:0.73,zIndex:2002}),$(window).scrollTop(100)):$.each(a.errors,function(a,b){$("#"+a).addClass("error");$('#more-modal label[for="'+a+'"]').addClass("error")}))},type:"POST"})}});$("#sc-area .pager-all").on("click",function(a){a.preventDefault();"View All"==$(this).text()?($("#sc-area .content > ul").cycle("destroy"),$("#suitcase-next, #suitcase-prev").hide(),$("#sc-area .content .suitcase-page").each(function(){3<$(this).children("ul").children("li").length?
$(this).css({height:"622px"}):$(this).css({height:"311px"})}),$("#sc-area .content > ul").css({height:"auto",overflow:"visible"}),$(this).text("View Less"),$("#sc-area .content .pager-current").text("1"),$("#sc-area .content .pager-total").text("1")):($("#sc-area .content .suitcase-page").each(function(){$(this).css({height:"auto"})}),$("#sc-area .content > ul").css({height:"622px",overflow:"hidden"}),$(this).text("View All"),c())});c()});
$(document).ready(function(){function c(c){x=(c+"").split(".");x1=x[0];x2=1<x.length?"."+x[1]:"";for(c=/(\d+)(\d{3})/;c.test(x1);)x1=x1.replace(c,"$1,$2");return x1+x2}var e=$("#sc-area.request-invoice");$("input.stepper").stepper();$("input.stepper").on("keydown",function(c){if(38==c.keyCode){var b=$(this).siblings(".up");$(b).trigger("click");c.preventDefault();c.stopPropagation()}40==c.keyCode&&(b=$(this).siblings(".down"),$(b).trigger("click"),c.preventDefault(),c.stopPropagation())});$("input.stepper").on("change",
function(f){var b=$(this).closest(".package"),h=$(b).find(".total span"),a=$(b).attr("data-cost");f=$(this).val();0!=f&&""!=f&&$("#check-nosells").is(":checked")&&($("#check-nosells").removeAttr("checked"),$("button#invoice").text("Request Invoice"));0>f.search(/^\d*$/)?($(this).val("0").attr("value","0"),f="0"):$(this).attr("value",f);$(b).addClass("active");$(b).attr("data-extended",f*a);$(h).text(c(parseInt(f*a)));b="/suitcase/update-qty/"+$(b).attr("data-id");"undefined"!==typeof env&&(b=env+
b);$.ajax({data:{qty:f},dataType:"json",url:b,success:function(a,b,d){$.isEmptyObject(a)},type:"GET"});var d=0;$(".package").each(function(a,b){d+=parseInt($(b).attr("data-extended"))});f="";f=0<d?$("#invoice-total .fee.value").attr("data-fee"):"0.00";$("#invoice-total .fee.value").text(f);$("#invoice-total .subtotal.value").text(c(d+".00"));0==parseFloat(d)+parseFloat(f)?$("#invoice-total .total.value").text("$0.00"):$("#invoice-total .total.value").text("$"+c(parseFloat(d)+parseFloat(f)))});$("button#invoice").on("click",
function(c){c.preventDefault();if(0<$('.package input[value=""]').length)$("#error-modal").modal({closeText:"X",overlay:"#fff",opacity:0.73,zIndex:2002});else{c=$(this).parent("form").attr("action");var b=$(".package input").serialize();$.ajax({data:b,dataType:"json",url:c,success:function(b,a,d){$("#sc-header .top").html(b.top);$("#sc-area .content").html(b.content);$("#sc-area .header").html(b.header);$("#sc-area .footer").html(b.footer);$("#sc-area .content").find(".tooltip.disabled").tooltipster({position:"top-right"});
"M"==b.status&&($("#sc-area .footer").find(".tooltip").tooltipster({position:"top-right"}),$("h1 .text").text("Order History"),$("#comment-area").remove(),$("form.suitcase-switcher").remove())},type:"POST"});"$0.00"!=$("#invoice-total .total.value").text()?$("#thanks-modal").modal({closeText:"X",overlay:"#fff",opacity:0.73,zIndex:2002}):$(window).scrollTop(100)}});$(".footer .tooltip").tooltipster({position:"top-right"});$("#thanks-modal button").on("click",function(c){$.modal.close();$(window).scrollTop(100)});
$("#check-nosells").change(function(c){c=$(this).is(":checked");var b=$("input.stepper");c?($("button#invoice").text("Close Suitcase"),$(b).each(function(b,a){$(a).val("0").trigger("change")})):($("button#invoice").text("Request Invoice"),$(b).each(function(b,a){$(a).val("").trigger("change")}))});$(e).find(".tooltip").tooltipster({position:"top-right"});$(e).find(".content").on("keypress",".item-price input",function(c){if(String.fromCharCode(c.keyCode).match(/[^0-9]/g))return!1;$(this).parent().find(".add").addClass("active");
unsaved=!0});$(e).find(".content").on("click",".item-price button.add:not(.disabled)",function(e){var b=$(this).siblings("input"),h=$(this).siblings("span"),a=$(this).siblings("button.edit"),d=$(this).attr("data-id");e=$(b).serialize();var g=$(this),d="/suitcase/update-price/"+d;"undefined"!==typeof env&&(d=env+d);$.ajax({beforeSend:function(){if(""!=$(b).val())$(h).text("$ "+c($(b).val())).show(),$(b).hide(),$(g).removeClass("active").hide(),$(a).show(),unsaved=!1;else return!1},data:e,dataType:"json",
url:d,success:function(a,b,d){$.isEmptyObject(a)},type:"GET"})});$(e).find(".content").on("click",".item-price button.edit:not(.disabled)",function(c){c=$(this).siblings("input");var b=$(this).siblings("span"),e=$(this).siblings("button.add"),a=$(this);$(b).hide();$(c).show();$(a).hide();$(e).show()});$(e).find(".content").on("keypress",".winning-bidders input",function(c){$(this).parent().parent().parent().find(".add").addClass("active");$(this).parent().parent().parent().find(".edit").addClass("active");
unsaved=!0});$(e).find(".content").on("click",".winning-bidders button.add:not(.disabled)",function(c){var b=$(this).parent().parent("tr"),e=$(this).attr("data-id");c=$(b).find("input").serialize();e="/suitcase/update-booking/"+e;"undefined"!==typeof env&&(e=env+e);$(b).find("td.first-name form").validate({errorPlacement:function(a,b){},rules:{"booking[first]":{required:!0}}});$(b).find("td.last-name form").validate({errorPlacement:function(a,b){},rules:{"booking[last]":{required:!0}}});$(b).find("td.email form").validate({errorPlacement:function(a,
b){},rules:{"booking[email]":{required:!0,email:!0}}});$(b).find("td.phone form").validate({errorPlacement:function(a,b){},rules:{"booking[phone]":{required:!0}}});var a=$(b).find("td.first-name input").valid(),d=$(b).find("td.last-name input").valid(),g=$(b).find("td.email input").valid(),k=$(b).find("td.phone input").valid();if(!(a&&d&&g&&k))return!1;$.ajax({beforeSend:function(){var a=$(b).find("td.first-name input").val(),d=$(b).find("td.last-name input").val(),c=$(b).find("td.email input").val(),
e=$(b).find("td.phone input").val();$(b).find("td.first-name span").text(a).attr("title",a).show();$(b).find("td.last-name span").text(d).attr("title",d).show();$(b).find("td.email span").text(c).attr("title",c).show();$(b).find("td.phone span").text(e).attr("title",e).show();$(b).find("td.first-name input").hide();$(b).find("td.last-name input").hide();$(b).find("td.email input").hide();$(b).find("td.phone input").hide();$(b).find("td.actions > button.add").remove();$(b).find("td.actions > button.edit").removeClass("active").show();
$(b).find("td.actions > button.mail").show();unsaved=!1},data:c,dataType:"json",url:e,success:function(a,b,d){$.isEmptyObject(a)},type:"POST"})});$(e).find(".content").on("click",".winning-bidders button.edit:not(.disabled)",function(c){var b=$(this).parent().parent("tr"),e=$(this).attr("data-id");c=$(b).find("input").serialize();e="/suitcase/update-booking/"+e;"undefined"!==typeof env&&(e=env+e);var a=$(b).find("td.first-name"),d=$(b).find("td.last-name"),g=$(b).find("td.email"),k=$(b).find("td.phone"),
m=$(this);if($(this).hasClass("neutral"))$(a).find("input").show(),$(a).find("span").hide(),$(d).find("input").show(),$(d).find("span").hide(),$(g).find("input").show(),$(g).find("span").hide(),$(k).find("input").show(),$(k).find("span").hide(),$(m).removeClass("neutral");else{$(b).find("td.first-name form").validate({errorPlacement:function(a,b){},rules:{"booking[first]":{required:!0}}});$(b).find("td.last-name form").validate({errorPlacement:function(a,b){},rules:{"booking[last]":{required:!0}}});
$(b).find("td.email form").validate({errorPlacement:function(a,b){},rules:{"booking[email]":{required:!0,email:!0}}});$(b).find("td.phone form").validate({errorPlacement:function(a,b){},rules:{"booking[phone]":{required:!0}}});a=$(b).find("td.first-name input").valid();d=$(b).find("td.last-name input").valid();g=$(b).find("td.email input").valid();k=$(b).find("td.phone input").valid();if(!(a&&d&&g&&k))return!1;$.ajax({beforeSend:function(){var a=$(b).find("td.first-name input").val(),d=$(b).find("td.last-name input").val(),
c=$(b).find("td.email input").val(),e=$(b).find("td.phone input").val();$(b).find("td.first-name span").text(a).attr("title",a).show();$(b).find("td.last-name span").text(d).attr("title",d).show();$(b).find("td.email span").text(c).attr("title",c).show();$(b).find("td.phone span").text(e).attr("title",e).show();$(b).find("td.first-name input").hide();$(b).find("td.last-name input").hide();$(b).find("td.email input").hide();$(b).find("td.phone input").hide();$(m).addClass("neutral").removeClass("active");
unsaved=!1},data:c,dataType:"json",url:e,success:function(a,b,d){$.isEmptyObject(a)},type:"POST"})}});$(e).find(".content").on("click",".winning-bidders button.mail:not(.disabled)",function(c){var b=$(this).parent().parent("tr");c=$(this).attr("data-id");var e=$(b).find("td.first-name input").val(),a=$(b).find("td.last-name input").val(),d=$(b).find("td.email input").val();$(b).find("td.phone input").val();var g=$(b).attr("data-code"),k=$("#test").attr("data-np"),m=$("#test").attr("data-first"),p=
$("#test").attr("data-last"),q=$("#test").attr("data-phone"),r=$("#test").attr("data-email"),s=$("#test").attr("data-event"),t=$("#test").attr("data-date"),n=$(b).parent().parent().parent().parent().parent("li"),b=$(n).attr("data-header"),u=$(n).attr("data-name"),n=$(n).attr("data-code"),l;l="Dear "+e+",\n\nCongratulations on your winning bid and thank you so much for your contribution! We appreciate you coming out and supporting our organization, and hope you had a wonderful time at our fundraising event. From all of us here at ";
l+=k+", we hope you have a wonderful time on your trip and we look forward to seeing you at our next event!\n\n";l+="Sincerely,\n";l+=m+" "+p+"\n";l+=k;$("#mail-modal #message").val(l);$("#mail-modal #mail-fullname").text(e+" "+a);$("#mail-modal #mail-package-header").text(b);$("#mail-modal #mail-package-name").text(u);$("#mail-modal #mail-voucher-code").text(g);$("#mail-modal #mail-package-code").text(n);$("#mail-modal #mail-fullname2").text(e+" "+a);$("#mail-modal #mail-np").text(k);$("#mail-modal #mail-np-name").text(m+
" "+p);$("#mail-modal #mail-np-phone").text(q);$("#mail-modal #mail-np-email").text(r);$("#mail-modal #mail-event-name").text(s);$("#mail-modal #mail-event-date").text(t);$("#mail-modal #mail-from").text(k);$("#mail-modal #mail-to").text(d);$("#mail-modal #voucher_id").val(c);$("#mail-modal").modal({closeText:"X",overlay:"#fff",opacity:0.73,zIndex:2002})});$("#mail-modal").find("button.send").on("click",function(c){c.preventDefault();c=$("#mail-modal form").attr("action");var b=$("#mail-modal form").serialize();
$.ajax({beforeSend:function(){var b=$("#mail-modal #voucher_id").val(),a=new Date;$('button.edit[data-id="'+b+'"]').removeClass("neutral").addClass("disabled").attr("title","You\u2019ve already sent this voucher.<br/>Contact your EC to change").tooltipster({position:"top-right"});$('button.mail[data-id="'+b+'"]').addClass("neutral").attr("title","Sent "+(a.getMonth()+1)+"/"+a.getDate()+"/"+a.getFullYear()).tooltipster({position:"top-right"});$.modal.close();$("#mail-thanks-modal").find(".number span").text("1");
$("#mail-thanks-modal").find(".name").text($("#mail-modal #mail-fullname").text());$("#mail-thanks-modal").find(".email").text($("#mail-modal #mail-to").text());$("#mail-thanks-modal").modal({closeText:"X",overlay:"#fff",opacity:0.73,zIndex:2002})},data:b,dataType:"json",url:c,success:function(b,a,d){$.isEmptyObject(b)},type:"POST"})});$("#mail-thanks-modal").find("button").on("click",function(c){c.preventDefault();$.modal.close()});$("#mail-modal").on($.modal.OPEN,function(c,b){$(window).width()<
$(document).width()&&$(b.elm).css({marginLeft:Math.floor(($(document).width()-$(b.elm).outerWidth())/2)+"px",left:"0"});94>$(window).height()-$(b.elm).outerHeight()&&($(b.elm).css({position:"absolute",marginTop:"120px",top:"0"}),$(window).scrollTop(100))})});
$(document).ready(function(){var c="/suitcase/preview";"undefined"!==typeof env&&(c=env+c);var e="/account/validate-email";"undefined"!==typeof env&&(e=env+e);$(".tooltip").tooltipster({position:"right"});$("#fos_user_registration_form_event_date").datepicker({buttonImage:"/img/calendar.png",buttonImageOnly:!0,constrainInput:!0,dateFormat:"mm/dd/y",minDate:"+1",maxDate:"+1y",onSelect:function(a,b){$("#account-modal form").validate().element("#fos_user_registration_form_event_date")},showOn:"both"});
$("#account-modal").on($.modal.OPEN,function(a,b){$(window).width()<$(document).width()&&$(b.elm).css({marginLeft:Math.floor(($(document).width()-$(b.elm).outerWidth())/2)+"px",left:"0"});94>$(window).height()-$(b.elm).outerHeight()&&($(b.elm).css({position:"absolute",marginTop:"120px",top:"0"}),$(window).scrollTop(100))});var f=$('#fos_user_registration_form_account_state option[value|="CA"]').detach(),b=$('#fos_user_registration_form_account_state option[value|="US"]').clone();$("#account-modal form select").selectBoxIt({autoWidth:!1,
nostyle:!1,downArrowIcon:"icon-arrow-down",viewport:$("#account-modal")});var h=$("select#fos_user_registration_form_account_state").data("selectBox-selectBoxIt");$("select#fos_user_registration_form_account_country").on("changed",function(){"CA"==$(this).val()?($('#fos_user_registration_form_account_state option[value|="US"]').remove(),$(f).appendTo("#fos_user_registration_form_account_state")):($('#fos_user_registration_form_account_state option[value|="CA"]').remove(),$(b).appendTo("#fos_user_registration_form_account_state"));
h.refresh()});$("#account-modal form").validate({errorElement:"em",errorPlacement:function(a,b){switch(b.attr("name")){case "fos_user_registration_form[event_date]":a.insertAfter("#fos_user_registration_form_event_date + img");break;case "fos_user_registration_form[terms]":a.insertAfter('label[for="fos_user_registration_form_terms"]');break;default:a.insertAfter(b)}},rules:{"fos_user_registration_form[suitcase]":{required:!0},"fos_user_registration_form[firstName]":{required:!0},"fos_user_registration_form[lastName]":{required:!0},
"fos_user_registration_form[account][name]":{required:!0},"fos_user_registration_form[email]":{email:!0,required:!0,remote:{url:e}},"fos_user_registration_form[plainPassword][first]":{required:!0,minlength:5},"fos_user_registration_form[plainPassword][second]":{equalTo:"#fos_user_registration_form_plainPassword_first"},"fos_user_registration_form[phone]":{required:!0},"fos_user_registration_form[account][state]":{required:!0},"fos_user_registration_form[account][zip]":{required:!0},"fos_user_registration_form[terms]":{required:!0}},
messages:{"fos_user_registration_form[suitcase]":"A suitcase name is required","fos_user_registration_form[firstName]":"First name required","fos_user_registration_form[lastName]":"Last name required","fos_user_registration_form[account][name]":"Organization name required","fos_user_registration_form[email]":{required:"Email address is required",remote:"An account with that email is already registered"},"fos_user_registration_form[plainPassword][second]":"The chosen passwords do no match","fos_user_registration_form[account][state]":"Required",
"fos_user_registration_form[phone]":"Phone number required","fos_user_registration_form[account][zip]":"Zip code required","fos_user_registration_form[terms]":"Must agree to our Terms of Service"},onfocusout:!1,submitHandler:function(a){var b=$(a).serialize(),e=$(a).parent().attr("data-id");$.ajax({beforeSend:function(){$("#account-modal .error").removeClass("error")},data:b,dataType:"json",url:$(a).attr("action"),success:function(a,b,d){$.isEmptyObject(a)||($.isEmptyObject(a.errors)?($("#core-nav").find(".inline-nav").append('<li><a href="/account">My Account</a></li>'),
$("#core-nav").find(".inline-nav").append('<li><a href="/logout">Logout</a></li>'),"none"!=e?$("#core-suitcase").replaceWith('<a href="/suitcase" id="core-suitcase-button"><span class="icon icon-suitcase"></span><em>I\'m</em> Packed<span class="count"> (1)</span></a>'):$("#core-suitcase").replaceWith('<a href="/suitcase" id="core-suitcase-button"><span class="icon icon-suitcase"></span><em>I\'m</em> Packed<span class="count"></span></a>'),$('.pd-a-add[data-id="'+e+'"], .f-add[data-id="'+e+'"], .pd-s-add[data-id="'+
e+'"]').addClass("disabled"),$('button[data-id="'+e+'"]').attr("disabled","disabled"),$.modal.close(),$.get(c,function(a){$("#account-modal").replaceWith(a)})):$.each(a.errors,function(a,b){$("#"+a).addClass("error");$('#account-modal label[for="'+a+'"]').addClass("error")}))},type:"POST"})}})});
$(function(){var c,e;"US"==$("#edit-contact-modal form select#contact_country").val()?(c=$('#contact_state option[value|="CA"]').detach(),e=$('#contact_state option[value|="US"]').clone()):(c=$('#contact_state option[value|="CA"]').clone(),e=$('#contact_state option[value|="US"]').detach());$("#edit-contact-modal form select").selectBoxIt({autoWidth:!1,nostyle:!1,downArrowIcon:"icon-arrow-down",viewport:$("#edit-contact-modal")});var f=$("select#contact_state").data("selectBox-selectBoxIt");$("select#contact_country").on("changed",
function(){"CA"==$(this).val()?($('#contact_state option[value|="US"]').remove(),$(c).appendTo("#contact_state")):($('#contact_state option[value|="CA"]').remove(),$(e).appendTo("#contact_state"));f.refresh()});$("#edit-contact-modal form").validate({submitHandler:function(b){var a=$(b).serialize();$.ajax({beforeSend:function(){},data:a,dataType:"json",url:$(b).attr("action"),success:function(a,b,c){$.isEmptyObject(a)||(b=$("#contact-info"),0==$("#contact-info-address").length&&""!=a.contact.address&&
$('<span id="contact-info-address"></span><br/>').insertAfter("#contact-info-cname + br"),$(b).find("#contact-info-address").text(a.contact.address),0==$("#contact-info-address2").length&&""!=a.contact.address2&&$('<span id="contact-info-address2"></span><br/>').insertAfter("#contact-info-address + br"),0<$("#contact-info-address2").length&&""==a.contact.address2&&$("#contact-info-address2 + br").remove(),$(b).find("#contact-info-address2").text(a.contact.address2),""!=a.contact.city?$(b).find("#contact-info-city").text(a.contact.city+
", "):$(b).find("#contact-info-city").text(""),$(b).find("#contact-info-state").text(a.contact.state),$(b).find("#contact-info-zip").text(a.contact.zip),$(b).find("#contact-info-country").text(a.contact.country),$(b).find("#contact-info-phone").text(a.contact.phone),$.modal.close())},type:"POST"})}});$("#contact-info .button.edit").on("click",function(b){b.preventDefault();$("#edit-contact-modal").modal({closeText:"X",overlay:"#fff",opacity:0.73,zIndex:2002});$("#edit-contact-modal form input#contact_address").focus()});
var b="/account/validate";"undefined"!==typeof env&&(b=env+b);$("#edit-password-modal form").validate({rules:{"contact[password][old]":{required:!0,remote:{url:b}},"contact[password][new]":{required:!0,minlength:5},"contact[password][verify]":{equalTo:"#contact_password_new"}},messages:{"contact[password][old]":"The password is incorrect.","contact[password][verify]":"The chosen passwords do no match."},onfocusout:!1,submitHandler:function(b){var a=$(b).serialize();$.ajax({beforeSend:function(){$("#contact_password_old").val("");
$("#contact_password_new").val("");$("#contact_password_verify").val("")},data:a,dataType:"json",url:$(b).attr("action"),success:function(a,b,c){$.isEmptyObject(a)||$.modal.close()},type:"POST"})}});$("#password-info .button.edit").on("click",function(b){b.preventDefault();$("#edit-password-modal").modal({closeText:"X",overlay:"#fff",opacity:0.73,zIndex:2002});$("#edit-password-modal form input#contact_password_old").focus()});$("#edit-suitcase-modal form").validate({submitHandler:function(b){var a=
$(b).serialize();$.ajax({beforeSend:function(){},data:a,dataType:"json",url:$(b).attr("action"),success:function(a,b,c){!$.isEmptyObject(a)&&a.success&&($("#event-name-"+a.suitcase.id+" strong").text(a.suitcase.event_name),$("#event-date-"+a.suitcase.id).text(a.suitcase.event_date),$.modal.close())},type:"POST"})}});$("#suitcase-info .button.edit").on("click",function(b){b.preventDefault();b=$(this).attr("data-id");var a=$("#event-name-"+b+" strong").text(),c=$("#event-date-"+b).text(),e=$("#edit-suitcase-modal form");
$(e).find("#suitcase_event_name").val(a);$(e).find("#suitcase_event_date").val(c);$(e).find("#suitcase_id").val(b);$("#edit-suitcase-modal").modal({closeText:"X",overlay:"#fff",opacity:0.73,zIndex:2002});$("#edit-suitcase-modal form input#suitcase_event_name").focus()});b="/suitcase/kill";"undefined"!==typeof env&&(b=env+b);$("#delete-suitcase-modal button").on("click",function(c){c.preventDefault();c=$(this).attr("data-id");$.ajax({beforeSend:function(){},dataType:"json",url:b+"/"+c,success:function(a,
b,c){!$.isEmptyObject(a)&&a.success&&($('#suitcase-info tr[data-id="'+a.suitcase.id+'"]').remove(),$.modal.close())},type:"GET"})});$("#suitcase-info .button.delete").on("click",function(b){b.preventDefault();b=$(this).attr("data-id");$("#delete-suitcase-modal").find("button").attr("data-id",b);$("#delete-suitcase-modal").modal({closeText:"X",overlay:"#fff",opacity:0.73,zIndex:2002})})});var unsaved=!1;$(function(){$(window).on("beforeunload",function(){if(unsaved)return"There are unsaved items on this page!"})});