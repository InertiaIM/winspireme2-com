(function(a,m,n,p){function g(a){if(a){var b=1+a.substr(1).search(/[A-Z]/),c=a.substr(0,b).toLowerCase();a=a.substr(b).toLowerCase();return"-"+c+"-"+a}}function k(a){return a?a+",":""}function e(a){return 0<a.length?a:null}function c(b){function c(b,d){var h=f(b),l={oldStyle:a(b).attr("style")||""},e={data:h,stepData:l};g.call(this,"beforeInitStep",a(b),e);l.delegate=h.delegate;g.call(this,"initStep",a(b),e);a(b).data("stepData",l);a(b).attr("id")||a(b).attr("id","step-"+(d+1));g.call(this,"applyStep",
a(b),e)}function q(b){var c=a(b).data("stepData");a(b).attr("style",c.oldStyle);g.call(this,"unapplyStep",a(b),{stepData:c})}function C(){w&&g.call(this,"setInactive",w,{stepData:a(w).data("stepData"),reason:"deinit"});u.jmpressClass&&a(s).removeClass(u.jmpressClass);g.call(this,"beforeDeinit",a(this),{});a(t.stepSelector,s).each(function(a){q.call(s,this)});v.attr("style",E.container);t.fullscreen&&a("html").attr("style","");y.attr("style",E.area);a(x).children().each(function(){s.append(a(this))});
t.fullscreen?x.remove():(x.remove(),y.remove());g.call(this,"afterDeinit",a(this),{});a(s).data("jmpressmethods",!1)}function g(b,c,d){d.settings=t;d.current=u;d.container=v;d.parents=c?a(c).parentsUntil(s).not(s).filter(t.stepSelector):null;d.current=u;d.jmpress=this;var h;a.each(t[b],function(a,b){h=b.call(s,c,d)||h});return h}function k(b,c){var d;a.isPlainObject(b)&&(d=b.substep,b=b.step);"string"===typeof b&&(b=s.find(b).first());if(!b||!a(b).data("stepData"))return!1;F.call(this);var h=a(b).data("stepData"),
f=!1;g.call(this,"beforeChange",b,{stepData:h,reason:c,cancel:function(){f=!0}});if(f)return p;var l={},q=b;a(b).data("stepData").delegate&&((q=e(a(b).parentsUntil(s).filter(t.stepSelector).filter(h.delegate))||e(a(b).near(h.delegate))||e(a(b).near(h.delegate,!0))||e(a(h.delegate,s)))?h=q.data("stepData"):q=b);z&&g.call(this,"setInactive",z,{stepData:a(z).data("stepData"),delegatedFrom:w,reason:c,target:l,nextStep:q,nextSubstep:d,nextStepData:h});var r={stepData:h,delegatedFrom:b,reason:c,target:l,
substep:d,prevStep:z,prevSubstep:D,prevStepData:z&&a(z).data("stepData")};g.call(this,"beforeActive",q,r);g.call(this,"setActive",q,r);u.jmpressClass&&a(s).removeClass(u.jmpressClass);a(s).addClass(u.jmpressClass="step-"+a(q).attr("id"));u.jmpressDelegatedClass&&a(s).removeClass(u.jmpressDelegatedClass);a(s).addClass(u.jmpressDelegatedClass="delegating-step-"+a(b).attr("id"));g.call(this,"applyTarget",q,a.extend({canvas:x,area:y,beforeActive:z},r));w=b;D=r.substep;z=q;u.idleTimeout&&clearTimeout(u.idleTimeout);
u.idleTimeout=setTimeout(function(){g.call(this,"idle",q,r)},Math.max(1,t.transitionDuration-100));return q}function F(){(function G(){function b(){0===a(v).scrollTop()&&0===a(v).scrollLeft()||G()}if("BODY"===a(v)[0].tagName)try{n.scrollTo(0,0)}catch(c){}a(v).scrollTop(0);a(v).scrollLeft(0);setTimeout(b,1);setTimeout(b,10);setTimeout(b,100);setTimeout(b,200);setTimeout(b,400)})()}b=a.extend(!0,{},b||{});var B={},A=null;for(A in h)B[A]=a.isFunction(b[A])?[b[A]]:b[A],b[A]=[];var t=a.extend(!0,{},l,
b);for(A in h)B[A]&&Array.prototype.push.apply(t[A],B[A]);var s=a(this),v=null,y=null,E={container:"",area:""},x=null,u=null,w=!1,D=null,z=!1;s.data("jmpressmethods",{select:k,reselect:function(a){return k({step:w,substep:D},a)},scrollFix:F,goTo:function(a){return k.call(this,a,"jump")},next:function(){return k.call(this,g.call(this,"selectNext",w,{stepData:a(w).data("stepData"),substep:D}),"next")},prev:function(){return k.call(this,g.call(this,"selectPrev",w,{stepData:a(w).data("stepData"),substep:D}),
"prev")},home:function(){return k.call(this,g.call(this,"selectHome",w,{stepData:a(w).data("stepData")}),"home")},end:function(){return k.call(this,g.call(this,"selectEnd",w,{stepData:a(w).data("stepData")}),"end")},canvas:function(b){d(x,b||{});return a(x)},container:function(){return v},settings:function(){return t},active:function(){return z&&a(z)},current:function(){return u},fire:function(b,c,d){if(h[b])return g.call(this,b,c,d);a.error("callback "+b+" is not registered.")},init:function(b){c.call(this,
a(b),u.nextIdNumber++)},deinit:function(b){b?q.call(this,a(b)):C.call(this)},reapply:function(b){g.call(this,"unapplyStep",a(b),{stepData:b.data("stepData")});g.call(this,"applyStep",a(b),{stepData:b.data("stepData")})}});navigator.userAgent.toLowerCase();t.notSupportedClass&&s.removeClass(t.notSupportedClass);b=a(t.stepSelector,s);v=s;y=a("<div />");x=a("<div />");a(s).children().filter(b).each(function(){x.append(a(this))});t.fullscreen&&(v=a("body"),a("html").css({overflow:"hidden"}),y=s);E.area=
y.attr("style")||"";E.container=v.attr("style")||"";t.fullscreen?(v.css({height:"100%"}),s.append(x)):(v.css({position:"relative"}),y.append(x),s.append(y));a(v).addClass(t.containerClass);a(y).addClass(t.areaClass);a(x).addClass(t.canvasClass);m.documentElement.style.height="100%";v.css({overflow:"hidden"});B={position:"absolute",transitionDuration:"0s"};B=a.extend({},t.animation,B);d(y,B);d(y,{top:"50%",left:"50%",perspective:"1000px"});d(x,B);u={};g.call(this,"beforeInit",null,{});b.each(function(a){c.call(s,
this,a)});u.nextIdNumber=b.length;g.call(this,"afterInit",null,{});k.call(this,g.call(this,"selectInitialStep","init",{}));t.initClass&&a(b).removeClass(t.initClass)}function d(c,d){var h,f,l={};for(h in d)d.hasOwnProperty(h)&&(f=b(h),null!==f&&(l[f]=d[h]));a(c).css(l);return c}function f(b){if(a(b)[0].dataset)return a.extend({},a(b)[0].dataset);var c={};b=a(b)[0].attributes;a.each(b,function(a,b){if("data-"===b.nodeName.substr(0,5)){var d;d=b.nodeName.substr(5);d=d.split("-");for(var h=1;h<d.length;h++)d[h]=
d[h].substr(0,1).toUpperCase()+d[h].substr(1);d=d.join("");c[d]=b.nodeValue}});return c}var b=function(){var a=m.createElement("dummy").style,b=["Webkit","Moz","O","ms","Khtml"],c={};return function(d){if("undefined"===typeof c[d]){var h=d.charAt(0).toUpperCase()+d.substr(1),h=(d+" "+b.join(h+" ")+h).split(" ");c[d]=null;for(var f in h)if(a[h[f]]!==p){c[d]=h[f];break}}return c[d]}}(),l={stepSelector:".step",containerClass:"",canvasClass:"",areaClass:"",notSupportedClass:"not-supported",fullscreen:!0,
animation:{transformOrigin:"top left",transitionProperty:k(g(b("transform")))+k(g(b("perspective")))+"opacity",transitionDuration:"1s",transitionDelay:"500ms",transitionTimingFunction:"ease-in-out"},transitionDuration:1500},h={beforeChange:1,beforeInitStep:1,initStep:1,beforeInit:1,afterInit:1,beforeDeinit:1,afterDeinit:1,applyStep:1,unapplyStep:1,setInactive:1,beforeActive:1,setActive:1,selectInitialStep:1,selectPrev:1,selectNext:1,selectHome:1,selectEnd:1,idle:1,applyTarget:1},q;for(q in h)l[q]=
[];var C={init:c,initialized:function(){return!!a(this).data("jmpressmethods")},deinit:function(){},css:d,pfx:b,defaults:function(){return l},register:function(b,c){a.isFunction(c)?C[b]?a.error("function "+b+" is already registered."):C[b]=c:h[b]?a.error("callback "+b+" is already registered."):(h[b]=1,l[b]=[])},dataset:f};a.fn.jmpress=function(b){function d(){var f=a(this).data("jmpressmethods");if(f&&f[b])return f[b].apply(this,Array.prototype.slice.call(arguments,1));if(C[b])return C[b].apply(this,
Array.prototype.slice.call(arguments,1));if(h[b]&&f){var f=f.settings(),l=Array.prototype.slice.call(arguments,1)[0];a.isFunction(l)&&(f[b]=f[b]||[],f[b].push(l))}else if("object"!==typeof b&&b)a.error("Method "+b+" does not exist on jQuery.jmpress");else return c.apply(this,arguments);return this}var f=arguments,l;a(this).each(function(a,b){l=d.apply(b,f)});return l};a.extend({jmpress:function(b){if(C[b])return C[b].apply(this,Array.prototype.slice.call(arguments,1));if(h[b]){var c=Array.prototype.slice.call(arguments,
1)[0];a.isFunction(c)?l[b].push(c):a.error("Second parameter should be a function: $.jmpress( callbackName, callbackFunction )")}else a.error("Method "+b+" does not exist on jQuery.jmpress")}})})(jQuery,document,window);
(function(a,m,n,p){function g(c,d,f,b){var l;c.each(function(c,q){if(b&&(l=d(q,f,b)))return!1;if(a(q).is(f))return l=q,!1;if(!b&&(l=d(q,f,b)))return!1});return l}function k(c,d,f){c=a(c).children();f&&(c=a(c.get().reverse()));return g(c,k,d,f)}function e(c,d,f){var b;c=a(c).parents();c=a(c.get());a.each(c.get(),function(c,h){if(f&&a(h).is(d))return b=h,!1;if(b=g(a(h)[f?"prevAll":"nextAll"](),k,d,f))return!1});return b}a.fn.near=function(c,d){var f=[];a(this).each(function(b,l){var h=(d?!1:k(l,c,d))||
g(a(l)[d?"prevAll":"nextAll"](),k,c,d)||e(l,c,d);h&&f.push(h)});return a(f)}})(jQuery,document,window);
(function(a,m,n,p){function g(a){return Math.round(1E4*a)/1E4+""}m={3:{transform:function(e,c){var d="translate(-50%,-50%)";a.each(c,function(a,b){var c=["X","Y","Z"],h;if("translate"===b[0])d+=" translate3d("+g(b[1]||0)+"px,"+g(b[2]||0)+"px,"+g(b[3]||0)+"px)";else if("rotate"===b[0]){var q=b[4]?[1,2,3]:[3,2,1];for(h=0;3>h;h++)d+=" rotate"+c[q[h]-1]+"("+g(b[q[h]]||0)+"deg)"}else if("scale"===b[0])for(h=0;3>h;h++)d+=" scale"+c[h]+"("+g(b[h+1]||1)+")"});a.jmpress("css",e,a.extend({},{transform:d}))}},
2:{transform:function(e,c){var d="translate(-50%,-50%)";a.each(c,function(a,b){var c=["X","Y"];if("translate"===b[0])d+=" translate("+g(b[1]||0)+"px,"+g(b[2]||0)+"px)";else if("rotate"===b[0])d+=" rotate("+g(b[3]||0)+"deg)";else if("scale"===b[0])for(var h=0;2>h;h++)d+=" scale"+c[h]+"("+g(b[h+1]||1)+")"});a.jmpress("css",e,a.extend({},{transform:d}))}},1:{transform:function(e,c){var d={top:0,left:0};a.each(c,function(a,b){"translate"===b[0]&&(d.left=Math.round(b[1]||0)+"px",d.top=Math.round(b[2]||
0)+"px")});e.animate(d,1E3)}}};var k=a.jmpress("pfx","perspective")?m[3]:a.jmpress("pfx","transform")?m[2]:m[1];a.jmpress("defaults").reasonableAnimation={};a.jmpress("initStep",function(e,c){var d=c.data,f=parseFloat;a.extend(c.stepData,{x:f(d.x)||0,y:f(d.y)||0,z:f(d.z)||0,r:f(d.r)||0,phi:f(d.phi)||0,rotate:f(d.rotate)||0,rotateX:f(d.rotateX)||0,rotateY:f(d.rotateY)||0,rotateZ:f(d.rotateZ)||0,revertRotate:!1,scale:f(d.scale)||1,scaleX:f(d.scaleX)||!1,scaleY:f(d.scaleY)||!1,scaleZ:f(d.scaleZ)||1})});
a.jmpress("afterInit",function(e,c){var d=c.settings.stepSelector,f=c.current;f.perspectiveScale=1;f.maxNestedDepth=0;for(var b=a(c.jmpress).find(d).children(d);b.length;)f.maxNestedDepth++,b=b.children(d)});a.jmpress("applyStep",function(e,c){a.jmpress("css",a(e),{position:"absolute"});0<c.parents.length&&a.jmpress("css",a(e),{top:"50%",left:"50%"});var d=c.stepData,d=[["translate",d.x||d.r*Math.sin(d.phi*Math.PI/180),d.y||-d.r*Math.cos(d.phi*Math.PI/180),d.z],["rotate",d.rotateX,d.rotateY,d.rotateZ||
d.rotate,!0],["scale",d.scaleX||d.scale,d.scaleY||d.scale,d.scaleZ||d.scale]];k.transform(e,d)});a.jmpress("setActive",function(e,c){var d=c.target,f=c.stepData,b=d.transform=[];d.perspectiveScale=1;for(var l=c.current.maxNestedDepth;l>(c.parents.length||0);l--)b.push(["scale"],["rotate"],["translate"]);b.push(["scale",1/(f.scaleX||f.scale),1/(f.scaleY||f.scale),1/f.scaleZ]);b.push(["rotate",-f.rotateX,-f.rotateY,-(f.rotateZ||f.rotate)]);b.push(["translate",-(f.x||f.r*Math.sin(f.phi*Math.PI/180)),
-(f.y||-f.r*Math.cos(f.phi*Math.PI/180)),-f.z]);d.perspectiveScale*=f.scaleX||f.scale;a.each(c.parents,function(c,f){var l=a(f).data("stepData");b.push(["scale",1/(l.scaleX||l.scale),1/(l.scaleY||l.scale),1/l.scaleZ]);b.push(["rotate",-l.rotateX,-l.rotateY,-(l.rotateZ||l.rotate)]);b.push(["translate",-(l.x||l.r*Math.sin(l.phi*Math.PI/180)),-(l.y||-l.r*Math.cos(l.phi*Math.PI/180)),-l.z]);d.perspectiveScale*=l.scaleX||l.scale});a.each(b,function(a,b){function d(f){c.current["rotate"+f+"-"+a]===p&&(c.current["rotate"+
f+"-"+a]=b[f]||0);var l=c.current["rotate"+f+"-"+a],e=l%360,g=(b[f]||0)%360;0>e&&(e+=360);0>g&&(g+=360);e=g-e;-180>e?e+=360:180<e&&(e-=360);c.current["rotate"+f+"-"+a]=b[f]=l+e}"rotate"===b[0]&&(d(1),d(2),d(3))})});a.jmpress("applyTarget",function(e,c){var d=c.target,f;f=c.settings;var b=1.3*d.perspectiveScale<c.current.perspectiveScale,l=d.perspectiveScale>1.3*c.current.perspectiveScale,h=-1;a.each(d.transform,function(a,b){if(!(1>=b.length||"rotate"===b[0]&&0===b[1]%360&&0===b[2]%360&&0===b[3]%
360))if("scale"===b[0])h=a;else return!1});h!==c.current.oldLastScale&&(b=l=!1,c.current.oldLastScale=h);var q=[];if(-1!==h)for(;0<=h;)"scale"===d.transform[h][0]&&(q.push(d.transform[h]),d.transform[h]=["scale"]),h--;var g=f.animation;f.reasonableAnimation[c.reason]&&(g=a.extend({},g,f.reasonableAnimation[c.reason]));f={perspective:Math.round(1E3*d.perspectiveScale)+"px"};f=a.extend({},g,f);b||(f.transitionDelay="0s");c.beforeActive||(f.transitionDuration="0s",f.transitionDelay="0s");a.jmpress("css",
c.area,f);k.transform(c.area,q);f=a.extend({},g);l||(f.transitionDelay="0s");c.beforeActive||(f.transitionDuration="0s",f.transitionDelay="0s");c.current.perspectiveScale=d.perspectiveScale;a.jmpress("css",c.canvas,f);k.transform(c.canvas,d.transform)})})(jQuery,document,window);
(function(a,m,n,p){m=a.jmpress;n=m("defaults");n.nestedActiveClass="nested-active";n.activeClass="active";m("setInactive",function(g,k){var e=k.settings,c=e.activeClass,d=e.nestedActiveClass;c&&a(g).removeClass(c);d&&a.each(k.parents,function(c,b){a(b).removeClass(d)})});m("setActive",function(g,k){var e=k.settings,c=e.activeClass,d=e.nestedActiveClass;c&&a(g).addClass(c);d&&a.each(k.parents,function(c,b){a(b).addClass(d)})})})(jQuery,document,window);
(function(a,m,n,p){function g(e,c){return a(this).find(c.settings.stepSelector).first()}function k(e,c,d,f){if(!c)return!1;d=d.settings.stepSelector;c=a(c);do{c=c.near(d,f);if(0===c.length||0===c.closest(e).length)c=a(e).find(d)[f?"last":"first"]();if(!c.length)return!1}while(c.data("stepData").exclude);return c}m=a.jmpress;m("initStep",function(a,c){c.stepData.exclude=c.data.exclude&&-1===["false","no"].indexOf(c.data.exclude)});m("selectInitialStep",g);m("selectHome",g);m("selectEnd",function(e,
c){return a(this).find(c.settings.stepSelector).last()});m("selectPrev",function(a,c){return k(this,a,c,!0)});m("selectNext",function(a,c){return k(this,a,c)})})(jQuery,document,window);(function(a,m,n,p){a.jmpress("selectInitialStep",function(a,k){return k.settings.start})})(jQuery,document,window);
(function(a,m,n,p){function g(e,c,d){for(var f=0;f<c.length-1;f++){var b=c[f],l=c[f+1];a(e).jmpress("initialized")?a(b,e).data("stepData")[d]=l:a(b,e).attr("data-"+d,l)}}function k(e,c,d,f){c=c.stepData;if(c[d]&&((e=a(e).near(c[d],f))&&e.length||(e=a(c[d],this)[f?"last":"first"]())&&e.length))return e}m=a.jmpress;m("register","route",function(a,c,d){"string"===typeof a&&(a=[a,a]);g(this,a,d?"prev":"next");c||g(this,a.reverse(),d?"next":"prev")});m("initStep",function(a,c){for(var d in{next:1,prev:1})c.stepData[d]=
c.data[d]});m("selectNext",function(a,c){return k.call(this,a,c,"next")});m("selectPrev",function(a,c){return k.call(this,a,c,"prev",!0)})})(jQuery,document,window);
(function(a,m,n,p){m=a.jmpress;m("register","ajax:loadStep");m("register","ajax:afterStepLoaded");m("defaults").ajaxLoadedClass="loaded";m("initStep",function(g,k){k.stepData.src=a(g).attr("href")||k.data.src||!1;k.stepData.srcLoaded=!1});m("ajax:loadStep",function(g,k){var e=k.stepData,c=e&&e.src,d=k.settings;c&&(a(g).addClass(d.ajaxLoadedClass),e.srcLoaded=!0,a(g).load(c,function(c,b,d){a(k.jmpress).jmpress("fire","ajax:afterStepLoaded",g,a.extend({},k,{response:c,status:b,xhr:d}))}))});m("idle",
function(g,k){if(g){var e=k.settings,c=a(this);a(g).add(a(g).near(e.stepSelector)).add(a(g).near(e.stepSelector,!0)).add(c.jmpress("fire","selectPrev",g,{stepData:a(g).data("stepData")})).add(c.jmpress("fire","selectNext",g,{stepData:a(g).data("stepData")})).each(function(){var d=a(this).data("stepData");d.src&&!d.srcLoaded&&c.jmpress("fire","ajax:loadStep",this,{stepData:a(this).data("stepData")})})}});m("setActive",function(g,k){var e=a(g).data("stepData");e.src&&!e.srcLoaded&&a(this).jmpress("fire",
"ajax:loadStep",g,{stepData:a(g).data("stepData")})})})(jQuery,document,window);
(function(a,m,n,p){function g(e){try{var c=a("#"+n.location.hash.replace(/^#\/?/,""));return 0<c.length&&c.is(e.stepSelector)?c:p}catch(d){}}function k(a){a="#/"+a;n.history&&n.history.pushState?n.location.hash!==a&&n.history.pushState({},"",a):n.location.hash!==a&&(n.location.hash=a)}m=a.jmpress;m("defaults").hash={use:!0,update:!0,bindChange:!0};m("selectInitialStep",function(e,c){var d=c.settings,f=d.hash,b=c.current,l=a(this);c.current.hashNamespace=".jmpress-"+Math.round(1E5*Math.random(),0);
if(f.use)return f.bindChange&&(a(n).bind("hashchange"+b.hashNamespace,function(a){var b=g(d);l.jmpress("initialized")&&l.jmpress("scrollFix");b&&b.length&&(b.attr("id")!==l.jmpress("active").attr("id")&&l.jmpress("select",b),k(b.attr("id")));a.preventDefault()}),a("a[href^=#]").on("click"+b.hashNamespace,function(b){var c=a(this).attr("href");try{a(c).is(d.stepSelector)&&(l.jmpress("select",c),b.preventDefault(),b.stopPropagation())}catch(f){}})),g(d)});m("afterDeinit",function(e,c){a("a[href^=#]").off(c.current.hashNamespace);
a(n).unbind(c.current.hashNamespace)});m("setActive",function(e,c){var d=c.settings,f=c.current;d.hash.use&&d.hash.update&&(clearTimeout(f.hashtimeout),f.hashtimeout=setTimeout(function(){k(a(c.delegatedFrom).attr("id"))},d.transitionDuration+200))})})(jQuery,document,window);
(function(a,m,n,p){function g(a){a.preventDefault();a.stopPropagation()}n=a.jmpress;n("defaults").keyboard={use:!0,keys:{33:"prev",37:"prev",38:"prev",9:"next:prev",32:"next",34:"next",39:"next",40:"next",36:"home",35:"end"},ignore:{INPUT:[32,37,38,39,40],TEXTAREA:[32,37,38,39,40],SELECT:[38,40]},tabSelector:"a[href]:visible, :input:visible"};n("afterInit",function(k,e){var c=e.settings,d=c.keyboard,f=d.ignore,b=e.current,l=a(this);c.fullscreen||l.attr("tabindex",0);b.keyboardNamespace=".jmpress-"+
Math.round(1E5*Math.random(),0);a(c.fullscreen?m:l).bind("keypress"+b.keyboardNamespace,function(a){for(var b in f)if(a.target.nodeName===b&&-1!==f[b].indexOf(a.which))return;(37<=a.which&&40>=a.which||32===a.which)&&g(a)});a(c.fullscreen?m:l).bind("keydown"+b.keyboardNamespace,function(b){var e=a(b.target);if((c.fullscreen||e.closest(l).length)&&d.use){for(var k in f)if(e[0].nodeName===k&&-1!==f[k].indexOf(b.which))return;k=!1;var r;if(9===b.which){e.closest(l.jmpress("active")).length?(r=e.near(d.tabSelector,
b.shiftKey),a(r).closest(c.stepSelector).is(l.jmpress("active"))||(r=p)):b.shiftKey?k=!0:r=l.jmpress("active").find("a[href], :input").filter(":visible").first();if(r&&0<r.length){r.focus();l.jmpress("scrollFix");g(b);return}b.shiftKey&&(k=!0)}e=d.keys[b.which];"string"===typeof e?(-1!==e.indexOf(":")&&(e=e.split(":"),e=b.shiftKey?e[1]:e[0]),l.jmpress(e),g(b)):a.isFunction(e)?e.call(l,b):e&&(l.jmpress.apply(l,e),g(b));k&&(r=l.jmpress("active").find("a[href], :input").filter(":visible").last(),r.focus(),
l.jmpress("scrollFix"))}})});n("afterDeinit",function(g,e){a(m).unbind(e.current.keyboardNamespace)})})(jQuery,document,window);
(function(a,m,n,p){function g(a,b){return Math.max(Math.min(a,b),-b)}function k(c,b,d){var h=a(this).jmpress("current"),e=a(this).jmpress("settings"),k=a(this).jmpress("active").data("stepData"),r=a(this).jmpress("container");0===h.userZoom&&0>d||(e=k.viewPortZoomable||e.viewPort.zoomable,h.userZoom===e&&0<d||(h.userZoom+=d,k=a(r).innerWidth()/2,r=a(r).innerHeight()/2,b=b?b-r:b,h.userTranslateX=g(h.userTranslateX-d*(c?c-k:c)/h.zoomOriginWindowScale/e,k*h.userZoom*h.userZoom/e),h.userTranslateY=g(h.userTranslateY-
d*b/h.zoomOriginWindowScale/e,r*h.userZoom*h.userZoom/e),a(this).jmpress("reselect","zoom")))}var e=function(){var a=navigator.userAgent.toLowerCase();return(/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||0>a.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[])[1]||""}(),c=a.jmpress("defaults");c.viewPort={width:!1,height:!1,maxScale:0,minScale:0,zoomable:0,zoomBindMove:!0,zoomBindWheel:!0};
var d=c.keyboard.keys;d["mozilla"===e?107:187]="zoomIn";d["mozilla"===e?109:189]="zoomOut";c.reasonableAnimation.resize={transitionDuration:"0s",transitionDelay:"0ms"};c.reasonableAnimation.zoom={transitionDuration:"0s",transitionDelay:"0ms"};a.jmpress("initStep",function(a,b){for(var c in{viewPortHeight:1,viewPortWidth:1,viewPortMinScale:1,viewPortMaxScale:1,viewPortZoomable:1})b.stepData[c]=b.data[c]&&parseFloat(b.data[c])});a.jmpress("afterInit",function(c,b){var d=this;b.current.viewPortNamespace=
".jmpress-"+Math.round(1E5*Math.random(),0);a(n).bind("resize"+b.current.viewPortNamespace,function(b){a(d).jmpress("reselect","resize")});b.current.userZoom=0;b.current.userTranslateX=0;b.current.userTranslateY=0;b.settings.viewPort.zoomBindMove&&a(b.settings.fullscreen?m:this).bind("mousedown"+b.current.viewPortNamespace,function(a){b.current.userZoom&&(b.current.userTranslating={x:a.clientX,y:a.clientY},a.preventDefault(),a.stopImmediatePropagation())}).bind("mousemove"+b.current.viewPortNamespace,
function(c){var f=b.current.userTranslating;f&&(a(d).jmpress("zoomTranslate",c.clientX-f.x,c.clientY-f.y),f.x=c.clientX,f.y=c.clientY,c.preventDefault(),c.stopImmediatePropagation())}).bind("mouseup"+b.current.viewPortNamespace,function(a){b.current.userTranslating&&(b.current.userTranslating=p,a.preventDefault(),a.stopImmediatePropagation())})});a.jmpress("register","zoomIn",function(a,b){k.call(this,a||0,b||0,1)});a.jmpress("register","zoomOut",function(a,b){k.call(this,a||0,b||0,-1)});a.jmpress("register",
"zoomTranslate",function(c,b){var d=a(this).jmpress("current"),h=a(this).jmpress("settings"),e=a(this).jmpress("active").data("stepData"),k=a(this).jmpress("container"),h=e.viewPortZoomable||h.viewPort.zoomable,e=a(k).innerWidth(),k=a(k).innerHeight();d.userTranslateX=g(d.userTranslateX+c/d.zoomOriginWindowScale,e*d.userZoom*d.userZoom/h);d.userTranslateY=g(d.userTranslateY+b/d.zoomOriginWindowScale,k*d.userZoom*d.userZoom/h);a(this).jmpress("reselect","zoom")});a.jmpress("afterDeinit",function(c,
b){a(b.settings.fullscreen?m:this).unbind(b.current.viewPortNamespace);a(n).unbind(b.current.viewPortNamespace)});a.jmpress("setActive",function(c,b){var d=b.settings.viewPort,h=b.stepData.viewPortHeight||d.height,e=b.stepData.viewPortWidth||d.width,g=b.stepData.viewPortMaxScale||d.maxScale,d=b.stepData.viewPortMinScale||d.minScale,h=h&&a(b.container).innerHeight()/h;if(e=((e=e&&a(b.container).innerWidth()/e)||h)&&Math.min(e||h,h||e)){e=e||1;g&&(e=Math.min(e,g));d&&(e=Math.max(e,d));if(d=b.stepData.viewPortZoomable||
b.settings.viewPort.zoomable)g=(1/e-1/g)/d,e=1/(1/e-g*b.current.userZoom);b.target.transform.reverse();b.current.userTranslateX&&b.current.userTranslateY?b.target.transform.push(["translate",b.current.userTranslateX,b.current.userTranslateY,0]):b.target.transform.push(["translate"]);b.target.transform.push(["scale",e,e,1]);b.target.transform.reverse();b.target.perspectiveScale/=e}b.current.zoomOriginWindowScale=e});a.jmpress("setInactive",function(c,b){b.nextStep&&c&&a(b.nextStep).attr("id")===a(c).attr("id")||
(b.current.userZoom=0,b.current.userTranslateX=0,b.current.userTranslateY=0)})})(jQuery,document,window);
(function(a,m,n,p){m=a.jmpress;m("defaults").mouse={clickSelects:!0};m("afterInit",function(g,k){var e=k.settings,c=e.stepSelector,d=k.current,f=a(this);d.clickableStepsNamespace=".jmpress-"+Math.round(1E5*Math.random(),0);f.bind("click"+d.clickableStepsNamespace,function(b){if(e.mouse.clickSelects&&!d.userZoom){var l=a(b.target).closest(c);!l.is(f.jmpress("active"))&&l.length&&(f.jmpress("select",l[0],"click"),b.preventDefault(),b.stopPropagation())}})});m("afterDeinit",function(g,k){a(this).unbind(k.current.clickableStepsNamespace)})})(jQuery,
document,window);
(function(a,m,n,p){n=a.jmpress;n("afterInit",function(g,k){var e=k.settings,c=k.current,d=k.jmpress;c.mobileNamespace=".jmpress-"+Math.round(1E5*Math.random(),0);var f,b=[0,0];a(e.fullscreen?m:d).bind("touchstart"+c.mobileNamespace,function(a){f=a.originalEvent.touches[0];b=[f.pageX,f.pageY]}).bind("touchmove"+c.mobileNamespace,function(a){f=a.originalEvent.touches[0];a.preventDefault();return!1}).bind("touchend"+c.mobileNamespace,function(c){var e=[f.pageX,f.pageY],e=[e[0]-b[0],e[1]-b[1]];if(50<
Math.max(Math.abs(e[0]),Math.abs(e[1])))return e=Math.abs(e[0])>Math.abs(e[1])?e[0]:e[1],a(d).jmpress(0<e?"prev":"next"),c.preventDefault(),!1})});n("afterDeinit",function(g,k){var e=k.current,c=k.jmpress;a(k.settings.fullscreen?m:c).unbind(e.mobileNamespace)})})(jQuery,document,window);
(function(a,m,n,p){function g(b,c,d){for(var e in c){var f=e;d&&(f=d+f.substr(0,1).toUpperCase()+f.substr(1));a.isPlainObject(c[e])?g(b,c[e],f):b[f]===p&&(b[f]=c[e])}}function k(b,c){a.isArray(c)?c.length<b.length?a.error("more nested steps than children in template"):b.each(function(b,e){e=a(e);var f=e.data(d)||{};g(f,c[b]);e.data(d,f)}):a.isFunction(c)&&b.each(function(e,f){f=a(f);var k=f.data(d)||{};g(k,c(e,f,b));f.data(d,k)})}function e(a,c,d,e){d.children&&(c=c.children(e.settings.stepSelector),
k(c,d.children));g(a,d)}var c=a.jmpress,d="_template_",f={};c("beforeInitStep",function(b,c){b=a(b);var h=c.data,g=h.template,k=b.data("_applied_template_"),r=b.data(d);g&&a.each(g.split(" "),function(a,d){e(h,b,f[d],c)});k&&e(h,b,k,c);r&&(e(h,b,r,c),b.data(d,null),r.template&&a.each(r.template.split(" "),function(a,d){e(h,b,f[d],c)}))});c("beforeInit",function(b,d){var e=c("dataset",this).template,g=d.settings.stepSelector;e&&(e=f[e],k(a(this).find(g).filter(function(){return!a(this).parent().is(g)}),
e.children))});c("register","template",function(b,c){f[b]=f[b]?a.extend(!0,{},f[b],c):a.extend(!0,{},c)});c("register","apply",function(b,c){if(c)if(a.isArray(c))k(a(b),c);else{var d;d="string"===typeof c?f[c]:a.extend(!0,{},c);a(b).each(function(b,c){c=a(c);var e=c.data("_applied_template_")||{};g(e,d);c.data("_applied_template_",e)})}else{var e=a(this).jmpress("settings").stepSelector;k(a(this).find(e).filter(function(){return!a(this).parent().is(e)}),b)}})})(jQuery,document,window);
(function(a,m,n,p){a.jmpress("setActive",function(g,k){k.prevStep!==g&&a(g).triggerHandler("enterStep")});a.jmpress("setInactive",function(g,k){k.nextStep!==g&&a(g).triggerHandler("leaveStep")})})(jQuery,document,window);
(function(a,m,n,p){function g(e,c,d,f){f=f||e.length-1;for(d=d||0;d<f+1;d++)if(a(e[d].element).is(c))return d}function k(e,c,d){a.each(c._on,function(a,b){e.push({substep:b.substep,delay:b.delay+d});k(e,b.substep,b.delay+d)})}a.jmpress("defaults").customAnimationDataAttribute="jmpress";a.jmpress("afterInit",function(a,c){c.current.animationTimeouts=[];c.current.animationCleanupWaiting=[]});a.jmpress("applyStep",function(e,c){function d(a,b){if(b.substep._after)return l=b.substep._after,!1}var f={},
b=[];a(e).find("[data-"+c.settings.customAnimationDataAttribute+"]").each(function(d,f){a(f).closest(c.settings.stepSelector).is(e)&&b.push({element:f})});if(0!==b.length){a.each(b,function(b,d){for(var e=a(d.element).data(c.settings.customAnimationDataAttribute),f=e.split(" "),h=f[0],h={willClass:"will-"+h,doClass:"do-"+h,hasClass:"has-"+h},g="",l=1;l<f.length;l++){var k=f[l];switch(g){case "":"after"===k?g="after":a.warn("unknown keyword in '"+e+"'. '"+k+"' unknown.");break;case "after":if(k.match(/^[1-9][0-9]*m?s?/)){var m=
parseFloat(k);-1!==k.indexOf("ms")?m*=1:-1!==k.indexOf("s")?m*=1E3:-1!==k.indexOf("m")&&(m*=6E4);h.delay=m}else h.after=Array.prototype.slice.call(f,l).join(" "),l=f.length}}d.info=h;a(d.element).addClass(d.info.willClass);d._on=[];d._after=null});var l={_after:p,_on:[],info:{}};a.each(b,function(a,c){var d=c.info.after;if(d)if("step"===d)d=l;else if("prev"===d)d=b[a-1];else{var e=g(b,d,0,a-1);e===p&&(e=g(b,d));d=e===p||e===a?b[a-1]:b[e]}else d=b[a-1];if(d){if(!c.info.delay){if(!d._after){d._after=
c;return}d=d._after}d._on.push({substep:c,delay:c.info.delay||0})}});if(l._after===p&&0===l._on.length){var h=g(b,c.stepData.startSubstep)||0;l._after=b[h]}h=[];do{var m=[{substep:l,delay:0}];k(m,l,0);h.push(m);l=null;a.each(m,d)}while(l);f.list=h;a(e).data("substepsData",f)}});a.jmpress("unapplyStep",function(e,c){var d=a(e).data("substepsData");d&&a.each(d.list,function(c,b){a.each(b,function(b,c){c.substep.info.willClass&&a(c.substep.element).removeClass(c.substep.info.willClass);c.substep.info.hasClass&&
a(c.substep.element).removeClass(c.substep.info.hasClass);c.substep.info.doClass&&a(c.substep.element).removeClass(c.substep.info.doClass)})})});a.jmpress("setActive",function(e,c){var d=a(e).data("substepsData");if(d){c.substep===p&&(c.substep="prev"===c.reason?d.list.length-1:0);var f=c.substep;a.each(c.current.animationTimeouts,function(a,c){clearTimeout(c)});c.current.animationTimeouts=[];a.each(d.list,function(b,d){var e=b<f,g=b<=f;a.each(d,function(b,d){function f(){a(d.substep.element).addClass(d.substep.info.doClass)}
if(d.substep.info.hasClass)a(d.substep.element)[(e?"add":"remove")+"Class"](d.substep.info.hasClass);if(g&&!e&&d.delay&&"prev"!==c.reason)d.substep.info.doClass&&(a(d.substep.element).removeClass(d.substep.info.doClass),c.current.animationTimeouts.push(setTimeout(f,d.delay)));else if(d.substep.info.doClass)a(d.substep.element)[(g?"add":"remove")+"Class"](d.substep.info.doClass)})})}});a.jmpress("setInactive",function(e,c){function d(b){a.each(b.list,function(b,c){a.each(c,function(b,c){c.substep.info.hasClass&&
a(c.substep.element).removeClass(c.substep.info.hasClass);c.substep.info.doClass&&a(c.substep.element).removeClass(c.substep.info.doClass)})})}if(c.nextStep!==e){a.each(c.current.animationCleanupWaiting,function(a,c){d(c)});c.current.animationCleanupWaiting=[];var f=a(e).data("substepsData");f&&c.current.animationCleanupWaiting.push(f)}});a.jmpress("selectNext",function(e,c){if(c.substep!==p){var d=a(e).data("substepsData");if(d&&c.substep<d.list.length-1)return{step:e,substep:c.substep+1}}});a.jmpress("selectPrev",
function(e,c){if(c.substep!==p&&a(e).data("substepsData")&&0<c.substep)return{step:e,substep:c.substep-1}})})(jQuery,document,window);