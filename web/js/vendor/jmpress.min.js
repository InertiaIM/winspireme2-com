(function(a,n,m,k){function h(a){if(a){var b=1+a.substr(1).search(/[A-Z]/),c=a.substr(0,b).toLowerCase();a=a.substr(b).toLowerCase();return"-"+c+"-"+a}}function g(a){return!a?"":a+","}function e(a){return 0<a.length?a:null}function d(b){function d(b,c){var j=f(b),s={oldStyle:a(b).attr("style")||""},e={data:j,stepData:s};l.call(this,"beforeInitStep",a(b),e);s.delegate=j.delegate;l.call(this,"initStep",a(b),e);a(b).data("stepData",s);a(b).attr("id")||a(b).attr("id","step-"+(c+1));l.call(this,"applyStep",
a(b),e)}function j(b){var c=a(b).data("stepData");a(b).attr("style",c.oldStyle);l.call(this,"unapplyStep",a(b),{stepData:c})}function l(b,c,d){d.settings=q;d.current=t;d.container=v;d.parents=c?a(c).parentsUntil(r).not(r).filter(q.stepSelector):null;d.current=t;d.jmpress=this;var j;a.each(q[b],function(a,b){j=b.call(r,c,d)||j});return j}function s(b,c){var d;a.isPlainObject(b)&&(d=b.substep,b=b.step);"string"===typeof b&&(b=r.find(b).first());if(!b||!a(b).data("stepData"))return!1;h.call(this);var j=
a(b).data("stepData"),f=!1;l.call(this,"beforeChange",b,{stepData:j,reason:c,cancel:function(){f=!0}});if(f)return k;var g={},u=b;a(b).data("stepData").delegate&&((u=e(a(b).parentsUntil(r).filter(q.stepSelector).filter(j.delegate))||e(a(b).near(j.delegate))||e(a(b).near(j.delegate,!0))||e(a(j.delegate,r)))?j=u.data("stepData"):u=b);A&&l.call(this,"setInactive",A,{stepData:a(A).data("stepData"),delegatedFrom:w,reason:c,target:g,nextStep:u,nextSubstep:d,nextStepData:j});var p={stepData:j,delegatedFrom:b,
reason:c,target:g,substep:d,prevStep:A,prevSubstep:B,prevStepData:A&&a(A).data("stepData")};l.call(this,"beforeActive",u,p);l.call(this,"setActive",u,p);t.jmpressClass&&a(r).removeClass(t.jmpressClass);a(r).addClass(t.jmpressClass="step-"+a(u).attr("id"));t.jmpressDelegatedClass&&a(r).removeClass(t.jmpressDelegatedClass);a(r).addClass(t.jmpressDelegatedClass="delegating-step-"+a(b).attr("id"));l.call(this,"applyTarget",u,a.extend({canvas:y,area:z,beforeActive:A},p));w=b;B=p.substep;A=u;t.idleTimeout&&
clearTimeout(t.idleTimeout);t.idleTimeout=setTimeout(function(){l.call(this,"idle",u,p)},Math.max(1,q.transitionDuration-100));return u}function h(){(function E(){function b(){(0!==a(v).scrollTop()||0!==a(v).scrollLeft())&&E()}if("BODY"===a(v)[0].tagName)try{m.scrollTo(0,0)}catch(c){}a(v).scrollTop(0);a(v).scrollLeft(0);setTimeout(b,1);setTimeout(b,10);setTimeout(b,100);setTimeout(b,200);setTimeout(b,400)})()}b=a.extend(!0,{},b||{});var g={},x=null;for(x in p)g[x]=a.isFunction(b[x])?[b[x]]:b[x],b[x]=
[];var q=a.extend(!0,{},u,b);for(x in p)g[x]&&Array.prototype.push.apply(q[x],g[x]);var r=a(this),v=null,z=null,C="",D="",y=null,t=null,w=!1,B=null,A=!1;r.data("jmpressmethods",{select:s,reselect:function(a){return s({step:w,substep:B},a)},scrollFix:h,goTo:function(a){return s.call(this,a,"jump")},next:function(){return s.call(this,l.call(this,"selectNext",w,{stepData:a(w).data("stepData"),substep:B}),"next")},prev:function(){return s.call(this,l.call(this,"selectPrev",w,{stepData:a(w).data("stepData"),
substep:B}),"prev")},home:function(){return s.call(this,l.call(this,"selectHome",w,{stepData:a(w).data("stepData")}),"home")},end:function(){return s.call(this,l.call(this,"selectEnd",w,{stepData:a(w).data("stepData")}),"end")},canvas:function(b){c(y,b||{});return a(y)},container:function(){return v},settings:function(){return q},active:function(){return A&&a(A)},current:function(){return t},fire:function(b,c,d){if(p[b])return l.call(this,b,c,d);a.error("callback "+b+" is not registered.")},init:function(b){d.call(this,
a(b),t.nextIdNumber++)},deinit:function(b){b?j.call(this,a(b)):(w&&l.call(this,"setInactive",w,{stepData:a(w).data("stepData"),reason:"deinit"}),t.jmpressClass&&a(r).removeClass(t.jmpressClass),l.call(this,"beforeDeinit",a(this),{}),a(q.stepSelector,r).each(function(){j.call(r,this)}),v.attr("style",C),q.fullscreen&&a("html").attr("style",""),z.attr("style",D),a(y).children().each(function(){r.append(a(this))}),q.fullscreen?y.remove():(y.remove(),z.remove()),l.call(this,"afterDeinit",a(this),{}),
a(r).data("jmpressmethods",!1))},reapply:function(b){l.call(this,"unapplyStep",a(b),{stepData:b.data("stepData")});l.call(this,"applyStep",a(b),{stepData:b.data("stepData")})}});navigator.userAgent.toLowerCase();q.notSupportedClass&&r.removeClass(q.notSupportedClass);b=a(q.stepSelector,r);v=r;z=a("<div />");y=a("<div />");a(r).children().filter(b).each(function(){y.append(a(this))});q.fullscreen&&(v=a("body"),a("html").css({overflow:"hidden"}),z=r);D=z.attr("style")||"";C=v.attr("style")||"";q.fullscreen?
(v.css({height:"100%"}),r.append(y)):(v.css({position:"relative"}),z.append(y),r.append(z));a(v).addClass(q.containerClass);a(z).addClass(q.areaClass);a(y).addClass(q.canvasClass);n.documentElement.style.height="100%";v.css({overflow:"hidden"});g={position:"absolute",transitionDuration:"0s"};g=a.extend({},q.animation,g);c(z,g);c(z,{top:"50%",left:"50%",perspective:"1000px"});c(y,g);t={};l.call(this,"beforeInit",null,{});b.each(function(a){d.call(r,this,a)});t.nextIdNumber=b.length;l.call(this,"afterInit",
null,{});s.call(this,l.call(this,"selectInitialStep","init",{}));q.initClass&&a(b).removeClass(q.initClass)}function c(c,d){var j,l,f={};for(j in d)d.hasOwnProperty(j)&&(l=b(j),null!==l&&(f[l]=d[j]));a(c).css(f);return c}function f(b){if(a(b)[0].dataset)return a.extend({},a(b)[0].dataset);var c={};b=a(b)[0].attributes;a.each(b,function(a,b){if("data-"===b.nodeName.substr(0,5)){var d;d=b.nodeName.substr(5);d=d.split("-");for(var j=1;j<d.length;j++)d[j]=d[j].substr(0,1).toUpperCase()+d[j].substr(1);
d=d.join("");c[d]=b.nodeValue}});return c}var b,l=n.createElement("dummy").style,j=["Webkit","Moz","O","ms","Khtml"],s={};b=function(a){if("undefined"===typeof s[a]){var b=a.charAt(0).toUpperCase()+a.substr(1),b=(a+" "+j.join(b+" ")+b).split(" ");s[a]=null;for(var c in b)if(l[b[c]]!==k){s[a]=b[c];break}}return s[a]};var u={stepSelector:".step",containerClass:"",canvasClass:"",areaClass:"",notSupportedClass:"not-supported",fullscreen:!0,animation:{transformOrigin:"top left",transitionProperty:g(h(b("transform")))+
g(h(b("perspective")))+"opacity",transitionDuration:"1s",transitionDelay:"500ms",transitionTimingFunction:"ease-in-out",transformStyle:"preserve-3d"},transitionDuration:1500},p={beforeChange:1,beforeInitStep:1,initStep:1,beforeInit:1,afterInit:1,beforeDeinit:1,afterDeinit:1,applyStep:1,unapplyStep:1,setInactive:1,beforeActive:1,setActive:1,selectInitialStep:1,selectPrev:1,selectNext:1,selectHome:1,selectEnd:1,idle:1,applyTarget:1},x;for(x in p)u[x]=[];var q={init:d,initialized:function(){return!!a(this).data("jmpressmethods")},
deinit:function(){},css:c,pfx:b,defaults:function(){return u},register:function(b,c){a.isFunction(c)?q[b]?a.error("function "+b+" is already registered."):q[b]=c:p[b]?a.error("callback "+b+" is already registered."):(p[b]=1,u[b]=[])},dataset:f};a.fn.jmpress=function(b){function c(){var j=a(this).data("jmpressmethods");if(j&&j[b])return j[b].apply(this,Array.prototype.slice.call(arguments,1));if(q[b])return q[b].apply(this,Array.prototype.slice.call(arguments,1));if(p[b]&&j){var j=j.settings(),l=Array.prototype.slice.call(arguments,
1)[0];a.isFunction(l)&&(j[b]=j[b]||[],j[b].push(l))}else{if("object"===typeof b||!b)return d.apply(this,arguments);a.error("Method "+b+" does not exist on jQuery.jmpress")}return this}var j=arguments,l;a(this).each(function(a,b){l=c.apply(b,j)});return l};a.extend({jmpress:function(b){if(q[b])return q[b].apply(this,Array.prototype.slice.call(arguments,1));if(p[b]){var c=Array.prototype.slice.call(arguments,1)[0];a.isFunction(c)?u[b].push(c):a.error("Second parameter should be a function: $.jmpress( callbackName, callbackFunction )")}else a.error("Method "+
b+" does not exist on jQuery.jmpress")}})})(jQuery,document,window);
(function(a){function n(k,h,g,e){var d;k.each(function(c,f){if(e&&(d=h(f,g,e)))return!1;if(a(f).is(g))return d=f,!1;if(!e&&(d=h(f,g,e)))return!1});return d}function m(k,h,g){k=a(k).children();g&&(k=a(k.get().reverse()));return n(k,m,h,g)}a.fn.near=function(k,h){var g=[];a(this).each(function(e,d){var c;if(!(c=h?!1:m(d,k,h)))if(!(c=n(a(d)[h?"prevAll":"nextAll"](),m,k,h))){var f;c=a(d).parents();c=a(c.get());a.each(c.get(),function(b,c){if(h&&a(c).is(k))return f=c,!1;if(f=n(a(c)[h?"prevAll":"nextAll"](),
m,k,h))return!1});c=f}c&&g.push(c)});return a(g)}})(jQuery,document,window);
(function(a,n,m,k){function h(a){return Math.round(1E4*a)/1E4+""}n={3:{transform:function(e,d){var c="translate(-50%,-50%)";a.each(d,function(a,b){var d=["X","Y","Z"],j;if("translate"===b[0])c+=" translate3d("+h(b[1]||0)+"px,"+h(b[2]||0)+"px,"+h(b[3]||0)+"px)";else if("rotate"===b[0]){var s=b[4]?[1,2,3]:[3,2,1];for(j=0;3>j;j++)c+=" rotate"+d[s[j]-1]+"("+h(b[s[j]]||0)+"deg)"}else if("scale"===b[0])for(j=0;3>j;j++)c+=" scale"+d[j]+"("+h(b[j+1]||1)+")"});a.jmpress("css",e,a.extend({},{transform:c}))}},
2:{transform:function(e,d){var c="translate(-50%,-50%)";a.each(d,function(a,b){var d=["X","Y"];if("translate"===b[0])c+=" translate("+h(b[1]||0)+"px,"+h(b[2]||0)+"px)";else if("rotate"===b[0])c+=" rotate("+h(b[3]||0)+"deg)";else if("scale"===b[0])for(var j=0;2>j;j++)c+=" scale"+d[j]+"("+h(b[j+1]||1)+")"});a.jmpress("css",e,a.extend({},{transform:c}))}},1:{transform:function(e,d){var c={top:0,left:0};a.each(d,function(a,b){"translate"===b[0]&&(c.left=Math.round(b[1]||0)+"px",c.top=Math.round(b[2]||
0)+"px")});e.animate(c,1E3)}}};var g=a.jmpress("pfx","perspective")?n[3]:a.jmpress("pfx","transform")?n[2]:n[1];a.jmpress("defaults").reasonableAnimation={};a.jmpress("initStep",function(e,d){var c=d.data,f=parseFloat;a.extend(d.stepData,{x:f(c.x)||0,y:f(c.y)||0,z:f(c.z)||0,r:f(c.r)||0,phi:f(c.phi)||0,rotate:f(c.rotate)||0,rotateX:f(c.rotateX)||0,rotateY:f(c.rotateY)||0,rotateZ:f(c.rotateZ)||0,revertRotate:!1,scale:f(c.scale)||1,scaleX:f(c.scaleX)||!1,scaleY:f(c.scaleY)||!1,scaleZ:f(c.scaleZ)||1})});
a.jmpress("afterInit",function(e,d){var c=d.settings.stepSelector,f=d.current;f.perspectiveScale=1;f.maxNestedDepth=0;for(var b=a(d.jmpress).find(c).children(c);b.length;)f.maxNestedDepth++,b=b.children(c)});a.jmpress("applyStep",function(e,d){a.jmpress("css",a(e),{position:"absolute",transformStyle:"preserve-3d"});0<d.parents.length&&a.jmpress("css",a(e),{top:"50%",left:"50%"});var c=d.stepData,c=[["translate",c.x||c.r*Math.sin(c.phi*Math.PI/180),c.y||-c.r*Math.cos(c.phi*Math.PI/180),c.z],["rotate",
c.rotateX,c.rotateY,c.rotateZ||c.rotate,!0],["scale",c.scaleX||c.scale,c.scaleY||c.scale,c.scaleZ||c.scale]];g.transform(e,c)});a.jmpress("setActive",function(e,d){var c=d.target,f=d.stepData,b=c.transform=[];c.perspectiveScale=1;for(var l=d.current.maxNestedDepth;l>(d.parents.length||0);l--)b.push(["scale"],["rotate"],["translate"]);b.push(["scale",1/(f.scaleX||f.scale),1/(f.scaleY||f.scale),1/f.scaleZ]);b.push(["rotate",-f.rotateX,-f.rotateY,-(f.rotateZ||f.rotate)]);b.push(["translate",-(f.x||f.r*
Math.sin(f.phi*Math.PI/180)),-(f.y||-f.r*Math.cos(f.phi*Math.PI/180)),-f.z]);c.perspectiveScale*=f.scaleX||f.scale;a.each(d.parents,function(d,l){var f=a(l).data("stepData");b.push(["scale",1/(f.scaleX||f.scale),1/(f.scaleY||f.scale),1/f.scaleZ]);b.push(["rotate",-f.rotateX,-f.rotateY,-(f.rotateZ||f.rotate)]);b.push(["translate",-(f.x||f.r*Math.sin(f.phi*Math.PI/180)),-(f.y||-f.r*Math.cos(f.phi*Math.PI/180)),-f.z]);c.perspectiveScale*=f.scaleX||f.scale});a.each(b,function(a,b){function c(f){d.current["rotate"+
f+"-"+a]===k&&(d.current["rotate"+f+"-"+a]=b[f]||0);var l=d.current["rotate"+f+"-"+a],e=l%360,h=(b[f]||0)%360;0>e&&(e+=360);0>h&&(h+=360);e=h-e;-180>e?e+=360:180<e&&(e-=360);d.current["rotate"+f+"-"+a]=b[f]=l+e}"rotate"===b[0]&&(c(1),c(2),c(3))})});a.jmpress("applyTarget",function(e,d){var c=d.target,f;f=d.settings;var b=1.3*c.perspectiveScale<d.current.perspectiveScale,l=c.perspectiveScale>1.3*d.current.perspectiveScale,j=-1;a.each(c.transform,function(a,b){if(!(1>=b.length)&&!("rotate"===b[0]&&
0===b[1]%360&&0===b[2]%360&&0===b[3]%360))if("scale"===b[0])j=a;else return!1});j!==d.current.oldLastScale&&(b=l=!1,d.current.oldLastScale=j);var s=[];if(-1!==j)for(;0<=j;)"scale"===c.transform[j][0]&&(s.push(c.transform[j]),c.transform[j]=["scale"]),j--;var h=f.animation;f.reasonableAnimation[d.reason]&&(h=a.extend({},h,f.reasonableAnimation[d.reason]));f={perspective:Math.round(1E3*c.perspectiveScale)+"px"};f=a.extend({},h,f);b||(f.transitionDelay="0s");d.beforeActive||(f.transitionDuration="0s",
f.transitionDelay="0s");a.jmpress("css",d.area,f);g.transform(d.area,s);f=a.extend({},h);l||(f.transitionDelay="0s");d.beforeActive||(f.transitionDuration="0s",f.transitionDelay="0s");d.current.perspectiveScale=c.perspectiveScale;a.jmpress("css",d.canvas,f);g.transform(d.canvas,c.transform)})})(jQuery,document,window);
(function(a){var n=a.jmpress,m=n("defaults");m.nestedActiveClass="nested-active";m.activeClass="active";n("setInactive",function(k,h){var g=h.settings,e=g.activeClass,d=g.nestedActiveClass;e&&a(k).removeClass(e);d&&a.each(h.parents,function(c,f){a(f).removeClass(d)})});n("setActive",function(k,h){var g=h.settings,e=g.activeClass,d=g.nestedActiveClass;e&&a(k).addClass(e);d&&a.each(h.parents,function(c,f){a(f).addClass(d)})})})(jQuery,document,window);
(function(a){function n(h,g){return a(this).find(g.settings.stepSelector).first()}function m(h,g,e,d){if(!g)return!1;e=e.settings.stepSelector;g=a(g);do{g=g.near(e,d);if(0===g.length||0===g.closest(h).length)g=a(h).find(e)[d?"last":"first"]();if(!g.length)return!1}while(g.data("stepData").exclude);return g}var k=a.jmpress;k("initStep",function(a,g){g.stepData.exclude=g.data.exclude&&-1===["false","no"].indexOf(g.data.exclude)});k("selectInitialStep",n);k("selectHome",n);k("selectEnd",function(h,g){return a(this).find(g.settings.stepSelector).last()});
k("selectPrev",function(a,g){return m(this,a,g,!0)});k("selectNext",function(a,g){return m(this,a,g)})})(jQuery,document,window);(function(a){a.jmpress("selectInitialStep",function(a,m){return m.settings.start})})(jQuery,document,window);
(function(a){function n(h,g,e){for(var d=0;d<g.length-1;d++){var c=g[d],f=g[d+1];a(h).jmpress("initialized")?a(c,h).data("stepData")[e]=f:a(c,h).attr("data-"+e,f)}}function m(h,g,e,d){g=g.stepData;if(g[e]&&((h=a(h).near(g[e],d))&&h.length||(h=a(g[e],this)[d?"last":"first"]())&&h.length))return h}var k=a.jmpress;k("register","route",function(a,g,e){"string"===typeof a&&(a=[a,a]);n(this,a,e?"prev":"next");g||n(this,a.reverse(),e?"next":"prev")});k("initStep",function(a,g){for(var e in{next:1,prev:1})g.stepData[e]=
g.data[e]});k("selectNext",function(a,g){return m.call(this,a,g,"next")});k("selectPrev",function(a,g){return m.call(this,a,g,"prev",!0)})})(jQuery,document,window);
(function(a){var n=a.jmpress;n("register","ajax:loadStep");n("register","ajax:afterStepLoaded");n("defaults").ajaxLoadedClass="loaded";n("initStep",function(m,k){k.stepData.src=a(m).attr("href")||k.data.src||!1;k.stepData.srcLoaded=!1});n("ajax:loadStep",function(m,k){var h=k.stepData,g=h&&h.src,e=k.settings;g&&(a(m).addClass(e.ajaxLoadedClass),h.srcLoaded=!0,a(m).load(g,function(d,c,f){a(k.jmpress).jmpress("fire","ajax:afterStepLoaded",m,a.extend({},k,{response:d,status:c,xhr:f}))}))});n("idle",
function(m,k){if(m){var h=k.settings,g=a(this);a(m).add(a(m).near(h.stepSelector)).add(a(m).near(h.stepSelector,!0)).add(g.jmpress("fire","selectPrev",m,{stepData:a(m).data("stepData")})).add(g.jmpress("fire","selectNext",m,{stepData:a(m).data("stepData")})).each(function(){var e=a(this).data("stepData");e.src&&!e.srcLoaded&&g.jmpress("fire","ajax:loadStep",this,{stepData:a(this).data("stepData")})})}});n("setActive",function(m){var k=a(m).data("stepData");k.src&&!k.srcLoaded&&a(this).jmpress("fire",
"ajax:loadStep",m,{stepData:a(m).data("stepData")})})})(jQuery,document,window);
(function(a,n,m,k){function h(e){try{var d=a("#"+m.location.hash.replace(/^#\/?/,""));return 0<d.length&&d.is(e.stepSelector)?d:k}catch(c){}}function g(a){a="#/"+a;m.history&&m.history.pushState?m.location.hash!==a&&m.history.pushState({},"",a):m.location.hash!==a&&(m.location.hash=a)}n=a.jmpress;n("defaults").hash={use:!0,update:!0,bindChange:!0};n("selectInitialStep",function(e,d){var c=d.settings,f=c.hash,b=d.current,l=a(this);d.current.hashNamespace=".jmpress-"+Math.round(1E5*Math.random(),0);
if(f.use)return f.bindChange&&(a(m).bind("hashchange"+b.hashNamespace,function(a){var b=h(c);l.jmpress("initialized")&&l.jmpress("scrollFix");b&&b.length&&(b.attr("id")!==l.jmpress("active").attr("id")&&l.jmpress("select",b),g(b.attr("id")));a.preventDefault()}),a("a[href^=#]").on("click"+b.hashNamespace,function(b){var d=a(this).attr("href");try{a(d).is(c.stepSelector)&&(l.jmpress("select",d),b.preventDefault(),b.stopPropagation())}catch(f){}})),h(c)});n("afterDeinit",function(e,d){a("a[href^=#]").off(d.current.hashNamespace);
a(m).unbind(d.current.hashNamespace)});n("setActive",function(e,d){var c=d.settings,f=d.current;c.hash.use&&c.hash.update&&(clearTimeout(f.hashtimeout),f.hashtimeout=setTimeout(function(){g(a(d.delegatedFrom).attr("id"))},c.transitionDuration+200))})})(jQuery,document,window);
(function(a,n,m,k){function h(a){a.preventDefault();a.stopPropagation()}m=a.jmpress;m("defaults").keyboard={use:!0,keys:{33:"prev",37:"prev",38:"prev",9:"next:prev",32:"next",34:"next",39:"next",40:"next",36:"home",35:"end"},ignore:{INPUT:[32,37,38,39,40],TEXTAREA:[32,37,38,39,40],SELECT:[38,40]},tabSelector:"a[href]:visible, :input:visible"};m("afterInit",function(g,e){var d=e.settings,c=d.keyboard,f=c.ignore,b=e.current,l=a(this);d.fullscreen||l.attr("tabindex",0);b.keyboardNamespace=".jmpress-"+
Math.round(1E5*Math.random(),0);a(d.fullscreen?n:l).bind("keypress"+b.keyboardNamespace,function(a){for(var b in f)if(a.target.nodeName===b&&-1!==f[b].indexOf(a.which))return;(37<=a.which&&40>=a.which||32===a.which)&&h(a)});a(d.fullscreen?n:l).bind("keydown"+b.keyboardNamespace,function(b){var e=a(b.target);if((d.fullscreen||e.closest(l).length)&&c.use){for(var g in f)if(e[0].nodeName===g&&-1!==f[g].indexOf(b.which))return;g=!1;var p;if(9===b.which){e.closest(l.jmpress("active")).length?(p=e.near(c.tabSelector,
b.shiftKey),a(p).closest(d.stepSelector).is(l.jmpress("active"))||(p=k)):b.shiftKey?g=!0:p=l.jmpress("active").find("a[href], :input").filter(":visible").first();if(p&&0<p.length){p.focus();l.jmpress("scrollFix");h(b);return}b.shiftKey&&(g=!0)}e=c.keys[b.which];"string"===typeof e?(-1!==e.indexOf(":")&&(e=e.split(":"),e=b.shiftKey?e[1]:e[0]),l.jmpress(e),h(b)):a.isFunction(e)?e.call(l,b):e&&(l.jmpress.apply(l,e),h(b));g&&(p=l.jmpress("active").find("a[href], :input").filter(":visible").last(),p.focus(),
l.jmpress("scrollFix"))}})});m("afterDeinit",function(g,e){a(n).unbind(e.current.keyboardNamespace)})})(jQuery,document,window);
(function(a,n,m,k){function h(a,b){return Math.max(Math.min(a,b),-b)}function g(c,b,d){var j=a(this).jmpress("current"),e=a(this).jmpress("settings"),g=a(this).jmpress("active").data("stepData"),p=a(this).jmpress("container");0===j.userZoom&&0>d||(e=g.viewPortZoomable||e.viewPort.zoomable,j.userZoom===e&&0<d||(j.userZoom+=d,g=a(p).innerWidth()/2,p=a(p).innerHeight()/2,b=b?b-p:b,j.userTranslateX=h(j.userTranslateX-d*(c?c-g:c)/j.zoomOriginWindowScale/e,g*j.userZoom*j.userZoom/e),j.userTranslateY=h(j.userTranslateY-
d*b/j.zoomOriginWindowScale/e,p*j.userZoom*j.userZoom/e),a(this).jmpress("reselect","zoom")))}var e;e=navigator.userAgent.toLowerCase();e=(/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||0>e.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[])[1]||"";var d=a.jmpress("defaults");d.viewPort={width:!1,height:!1,maxScale:0,minScale:0,zoomable:0,zoomBindMove:!0,zoomBindWheel:!0};var c=d.keyboard.keys;
c["mozilla"===e?107:187]="zoomIn";c["mozilla"===e?109:189]="zoomOut";d.reasonableAnimation.resize={transitionDuration:"0s",transitionDelay:"0ms"};d.reasonableAnimation.zoom={transitionDuration:"0s",transitionDelay:"0ms"};a.jmpress("initStep",function(a,b){for(var c in{viewPortHeight:1,viewPortWidth:1,viewPortMinScale:1,viewPortMaxScale:1,viewPortZoomable:1})b.stepData[c]=b.data[c]&&parseFloat(b.data[c])});a.jmpress("afterInit",function(c,b){var d=this;b.current.viewPortNamespace=".jmpress-"+Math.round(1E5*
Math.random(),0);a(m).bind("resize"+b.current.viewPortNamespace,function(){a(d).jmpress("reselect","resize")});b.current.userZoom=0;b.current.userTranslateX=0;b.current.userTranslateY=0;b.settings.viewPort.zoomBindWheel&&a(b.settings.fullscreen?n:this).bind("mousewheel"+b.current.viewPortNamespace+" DOMMouseScroll"+b.current.viewPortNamespace,function(c,d){d=d||c.originalEvent.wheelDelta||-c.originalEvent.detail;var e=d/Math.abs(d);0>e?a(b.jmpress).jmpress("zoomOut",c.originalEvent.x,c.originalEvent.y):
0<e&&a(b.jmpress).jmpress("zoomIn",c.originalEvent.x,c.originalEvent.y);return!1});b.settings.viewPort.zoomBindMove&&a(b.settings.fullscreen?n:this).bind("mousedown"+b.current.viewPortNamespace,function(a){b.current.userZoom&&(b.current.userTranslating={x:a.clientX,y:a.clientY},a.preventDefault(),a.stopImmediatePropagation())}).bind("mousemove"+b.current.viewPortNamespace,function(c){var e=b.current.userTranslating;e&&(a(d).jmpress("zoomTranslate",c.clientX-e.x,c.clientY-e.y),e.x=c.clientX,e.y=c.clientY,
c.preventDefault(),c.stopImmediatePropagation())}).bind("mouseup"+b.current.viewPortNamespace,function(a){b.current.userTranslating&&(b.current.userTranslating=k,a.preventDefault(),a.stopImmediatePropagation())})});a.jmpress("register","zoomIn",function(a,b){g.call(this,a||0,b||0,1)});a.jmpress("register","zoomOut",function(a,b){g.call(this,a||0,b||0,-1)});a.jmpress("register","zoomTranslate",function(c,b){var d=a(this).jmpress("current"),e=a(this).jmpress("settings"),g=a(this).jmpress("active").data("stepData"),
k=a(this).jmpress("container"),e=g.viewPortZoomable||e.viewPort.zoomable,g=a(k).innerWidth(),k=a(k).innerHeight();d.userTranslateX=h(d.userTranslateX+c/d.zoomOriginWindowScale,g*d.userZoom*d.userZoom/e);d.userTranslateY=h(d.userTranslateY+b/d.zoomOriginWindowScale,k*d.userZoom*d.userZoom/e);a(this).jmpress("reselect","zoom")});a.jmpress("afterDeinit",function(c,b){a(b.settings.fullscreen?n:this).unbind(b.current.viewPortNamespace);a(m).unbind(b.current.viewPortNamespace)});a.jmpress("setActive",function(c,
b){var d=b.settings.viewPort,e=b.stepData.viewPortHeight||d.height,g=b.stepData.viewPortWidth||d.width,h=b.stepData.viewPortMaxScale||d.maxScale,d=b.stepData.viewPortMinScale||d.minScale,e=e&&a(b.container).innerHeight()/e;if(g=((g=g&&a(b.container).innerWidth()/g)||e)&&Math.min(g||e,e||g)){g=g||1;h&&(g=Math.min(g,h));d&&(g=Math.max(g,d));if(d=b.stepData.viewPortZoomable||b.settings.viewPort.zoomable)h=(1/g-1/h)/d,g=1/(1/g-h*b.current.userZoom);b.target.transform.reverse();b.current.userTranslateX&&
b.current.userTranslateY?b.target.transform.push(["translate",b.current.userTranslateX,b.current.userTranslateY,0]):b.target.transform.push(["translate"]);b.target.transform.push(["scale",g,g,1]);b.target.transform.reverse();b.target.perspectiveScale/=g}b.current.zoomOriginWindowScale=g});a.jmpress("setInactive",function(c,b){if(!b.nextStep||!c||a(b.nextStep).attr("id")!==a(c).attr("id"))b.current.userZoom=0,b.current.userTranslateX=0,b.current.userTranslateY=0})})(jQuery,document,window);
(function(a){var n=a.jmpress;n("defaults").mouse={clickSelects:!0};n("afterInit",function(m,k){var h=k.settings,g=h.stepSelector,e=k.current,d=a(this);e.clickableStepsNamespace=".jmpress-"+Math.round(1E5*Math.random(),0);d.bind("click"+e.clickableStepsNamespace,function(c){if(h.mouse.clickSelects&&!e.userZoom){var f=a(c.target).closest(g);!f.is(d.jmpress("active"))&&f.length&&(d.jmpress("select",f[0],"click"),c.preventDefault(),c.stopPropagation())}})});n("afterDeinit",function(m,k){a(this).unbind(k.current.clickableStepsNamespace)})})(jQuery,
document,window);
(function(a,n){var m=a.jmpress;m("afterInit",function(k,h){var g=h.settings,e=h.current,d=h.jmpress;e.mobileNamespace=".jmpress-"+Math.round(1E5*Math.random(),0);var c,f=[0,0];a(g.fullscreen?n:d).bind("touchstart"+e.mobileNamespace,function(a){c=a.originalEvent.touches[0];f=[c.pageX,c.pageY]}).bind("touchmove"+e.mobileNamespace,function(a){c=a.originalEvent.touches[0];a.preventDefault();return!1}).bind("touchend"+e.mobileNamespace,function(b){var e=[c.pageX,c.pageY],e=[e[0]-f[0],e[1]-f[1]];if(50<
Math.max(Math.abs(e[0]),Math.abs(e[1])))return e=Math.abs(e[0])>Math.abs(e[1])?e[0]:e[1],a(d).jmpress(0<e?"prev":"next"),b.preventDefault(),!1})});m("afterDeinit",function(k,h){var g=h.current,e=h.jmpress;a(h.settings.fullscreen?n:e).unbind(g.mobileNamespace)})})(jQuery,document,window);
(function(a,n,m,k){function h(b,c,d){for(var e in c){var f=e;d&&(f=d+f.substr(0,1).toUpperCase()+f.substr(1));a.isPlainObject(c[e])?h(b,c[e],f):b[f]===k&&(b[f]=c[e])}}function g(b,d){a.isArray(d)?d.length<b.length?a.error("more nested steps than children in template"):b.each(function(b,e){e=a(e);var f=e.data(c)||{};h(f,d[b]);e.data(c,f)}):a.isFunction(d)&&b.each(function(e,f){f=a(f);var g=f.data(c)||{};h(g,d(e,f,b));f.data(c,g)})}function e(a,c,d,e){d.children&&(c=c.children(e.settings.stepSelector),
g(c,d.children));h(a,d)}var d=a.jmpress,c="_template_",f={};d("beforeInitStep",function(b,d){b=a(b);var g=d.data,h=g.template,k=b.data("_applied_template_"),p=b.data(c);h&&a.each(h.split(" "),function(a,c){e(g,b,f[c],d)});k&&e(g,b,k,d);p&&(e(g,b,p,d),b.data(c,null),p.template&&a.each(p.template.split(" "),function(a,c){e(g,b,f[c],d)}))});d("beforeInit",function(b,c){var e=d("dataset",this).template,h=c.settings.stepSelector;e&&(e=f[e],g(a(this).find(h).filter(function(){return!a(this).parent().is(h)}),
e.children))});d("register","template",function(b,c){f[b]=f[b]?a.extend(!0,{},f[b],c):a.extend(!0,{},c)});d("register","apply",function(b,c){if(c)if(a.isArray(c))g(a(b),c);else{var d;d="string"===typeof c?f[c]:a.extend(!0,{},c);a(b).each(function(b,c){c=a(c);var e=c.data("_applied_template_")||{};h(e,d);c.data("_applied_template_",e)})}else{var e=a(this).jmpress("settings").stepSelector;g(a(this).find(e).filter(function(){return!a(this).parent().is(e)}),b)}})})(jQuery,document,window);
(function(a){a.jmpress("setActive",function(n,m){m.prevStep!==n&&a(n).triggerHandler("enterStep")});a.jmpress("setInactive",function(n,m){m.nextStep!==n&&a(n).triggerHandler("leaveStep")})})(jQuery,document,window);
(function(a,n,m,k){function h(e,d,c,f){f=f||e.length-1;for(c=c||0;c<f+1;c++)if(a(e[c].element).is(d))return c}function g(e,d,c){a.each(d._on,function(a,b){e.push({substep:b.substep,delay:b.delay+c});g(e,b.substep,b.delay+c)})}a.jmpress("defaults").customAnimationDataAttribute="jmpress";a.jmpress("afterInit",function(a,d){d.current.animationTimeouts=[];d.current.animationCleanupWaiting=[]});a.jmpress("applyStep",function(e,d){function c(a,b){if(b.substep._after)return l=b.substep._after,!1}var f={},
b=[];a(e).find("[data-"+d.settings.customAnimationDataAttribute+"]").each(function(c,f){a(f).closest(d.settings.stepSelector).is(e)&&b.push({element:f})});if(0!==b.length){a.each(b,function(b,c){for(var e=a(c.element).data(d.settings.customAnimationDataAttribute),f=e.split(" "),g=f[0],g={willClass:"will-"+g,doClass:"do-"+g,hasClass:"has-"+g},h="",j=1;j<f.length;j++){var l=f[j];switch(h){case "":"after"===l?h="after":a.warn("unknown keyword in '"+e+"'. '"+l+"' unknown.");break;case "after":if(l.match(/^[1-9][0-9]*m?s?/)){var k=
parseFloat(l);-1!==l.indexOf("ms")?k*=1:-1!==l.indexOf("s")?k*=1E3:-1!==l.indexOf("m")&&(k*=6E4);g.delay=k}else g.after=Array.prototype.slice.call(f,j).join(" "),j=f.length}}c.info=g;a(c.element).addClass(c.info.willClass);c._on=[];c._after=null});var l={_after:k,_on:[],info:{}};a.each(b,function(a,c){var d=c.info.after;if(d)if("step"===d)d=l;else if("prev"===d)d=b[a-1];else{var e=h(b,d,0,a-1);e===k&&(e=h(b,d));d=e===k||e===a?b[a-1]:b[e]}else d=b[a-1];if(d){if(!c.info.delay){if(!d._after){d._after=
c;return}d=d._after}d._on.push({substep:c,delay:c.info.delay||0})}});if(l._after===k&&0===l._on.length){var j=h(b,d.stepData.startSubstep)||0;l._after=b[j]}j=[];do{var m=[{substep:l,delay:0}];g(m,l,0);j.push(m);l=null;a.each(m,c)}while(l);f.list=j;a(e).data("substepsData",f)}});a.jmpress("unapplyStep",function(e){(e=a(e).data("substepsData"))&&a.each(e.list,function(d,c){a.each(c,function(c,b){b.substep.info.willClass&&a(b.substep.element).removeClass(b.substep.info.willClass);b.substep.info.hasClass&&
a(b.substep.element).removeClass(b.substep.info.hasClass);b.substep.info.doClass&&a(b.substep.element).removeClass(b.substep.info.doClass)})})});a.jmpress("setActive",function(e,d){var c=a(e).data("substepsData");if(c){d.substep===k&&(d.substep="prev"===d.reason?c.list.length-1:0);var f=d.substep;a.each(d.current.animationTimeouts,function(a,c){clearTimeout(c)});d.current.animationTimeouts=[];a.each(c.list,function(b,c){var e=b<f,g=b<=f;a.each(c,function(b,c){function f(){a(c.substep.element).addClass(c.substep.info.doClass)}
if(c.substep.info.hasClass)a(c.substep.element)[(e?"add":"remove")+"Class"](c.substep.info.hasClass);if(g&&!e&&c.delay&&"prev"!==d.reason)c.substep.info.doClass&&(a(c.substep.element).removeClass(c.substep.info.doClass),d.current.animationTimeouts.push(setTimeout(f,c.delay)));else if(c.substep.info.doClass)a(c.substep.element)[(g?"add":"remove")+"Class"](c.substep.info.doClass)})})}});a.jmpress("setInactive",function(e,d){if(d.nextStep!==e){a.each(d.current.animationCleanupWaiting,function(c,b){a.each(b.list,
function(b,c){a.each(c,function(b,c){c.substep.info.hasClass&&a(c.substep.element).removeClass(c.substep.info.hasClass);c.substep.info.doClass&&a(c.substep.element).removeClass(c.substep.info.doClass)})})});d.current.animationCleanupWaiting=[];var c=a(e).data("substepsData");c&&d.current.animationCleanupWaiting.push(c)}});a.jmpress("selectNext",function(e,d){if(d.substep!==k){var c=a(e).data("substepsData");if(c&&d.substep<c.list.length-1)return{step:e,substep:d.substep+1}}});a.jmpress("selectPrev",
function(e,d){if(d.substep!==k&&a(e).data("substepsData")&&0<d.substep)return{step:e,substep:d.substep-1}})})(jQuery,document,window);